class Lazy{constructor(e){this.arr=e,this.subscribers=[],this.store={},this.totalSize=0,this.cache={}}map(e){let t=this.arr.map(e);return this.notifySubscribers("map",[e]),new Lazy(t)}filter(e){let t=this.arr.filter(e);return this.notifySubscribers("filter",[e]),new Lazy(t)}reduce(e,t){let n=this.arr.reduce(e,t);return this.notifySubscribers("reduce",[e,t]),n}subscribe(e){this.subscribers.push(e)}setStore(e,t){this.store[e]=t;let n=JSON.stringify(this.store).length;this.totalSize+=n,this.notifySubscribers("setStore",[e,t])}getStore(e){return this.notifySubscribers("getStore",[e]),this.store[e]}sort(e){let t=this.arr.slice().sort(e);return this.notifySubscribers("sort",[e]),new Lazy(t)}reverse(){let e=this.arr.slice().reverse();return this.notifySubscribers("reverse",[]),new Lazy(e)}find(e){return this.notifySubscribers("find",[e]),this.arr.find(e)}some(e){return this.notifySubscribers("some",[e]),this.arr.some(e)}every(e){return this.notifySubscribers("every",[e]),this.arr.every(e)}concat(...e){this.notifySubscribers("concat",e);let t=this.arr.concat(...e);return this.notifySubscribers(),new Lazy(t)}slice(e,t){this.notifySubscribers("slice",[e,t]);let n=this.arr.slice(e,t);return this.notifySubscribers(),new Lazy(n)}splice(e,t,...n){return this.notifySubscribers("splice",[e,t,...n]),this.arr.splice(e,t,...n),this.notifySubscribers(),this}push(...e){return this.notifySubscribers("push",e),this.arr.push(...e),this.notifySubscribers(),this}pop(){return this.notifySubscribers("pop",[]),this.arr.pop()}shift(){this.notifySubscribers("shift",[]);let e=this.arr.shift();return this.notifySubscribers(),e}unshift(...e){return this.notifySubscribers("unshift",e),this.arr.unshift(...e),this.notifySubscribers(),this}forEach(e){return this.notifySubscribers("forEach",[e]),this.arr.forEach(e),this}includes(e){return this.notifySubscribers("includes",[e]),this.arr.includes(e)}indexOf(e){return this.notifySubscribers("indexOf",[e]),this.arr.indexOf(e)}lastIndexOf(e){return this.notifySubscribers("lastIndexOf",[e]),this.arr.lastIndexOf(e)}join(e){return this.notifySubscribers("join",[e]),this.arr.join(e)}toString(){return this.notifySubscribers("toString",[]),this.arr.toString()}notifySubscribers(e,t){let n=JSON.stringify(this.store).length;this.totalSize+=n,this.subscribers.forEach((n=>{var r;n({functionName:e,arguments:t,size:(r=this.totalSize,1024>r?`dataset is ${r} bytes`:1048576>r?`${(r/1024).toFixed(2)} KB`:1073741824>r?`${(r/1048576).toFixed(2)} MB`:`${(r/1073741824).toFixed(2)} GB`)})}))}}class JsonHandler{constructor(){this.cache={},this.subscribers=new Set,this.shards=0,this.shardsessions=[]}async query(e){let t=this.getCachedResult(e);if(t)return t;try{let t=await e();return this.cacheResult(e,Array.from(arguments),t),t}catch(e){throw console.error(`Error executing query: ${e}`),e}}subscribe(e){this.subscribers.add(e)}unsubscribe(e){this.subscribers.delete(e)}getCacheSizePerNode(){let e={};return Object.entries(this.cache).forEach((([t,n])=>{let r=0;Object.values(n).forEach((e=>{r+=JSON.stringify(e).length})),e[t]=`${r} bytes`})),e}notifySubscribers(e,t,n){this.subscribers.forEach((r=>{r({functionName:e,arguments:t,result:n})}))}getCachedResult(e){try{let t=this.getCacheKey(e),n=this.cache[t];return n?n.expiry&&Date.now()>n.expiry?(this.evictCache(t),null):n.result:null}catch(e){throw console.error(`Error getting cached result: ${e.message}`),e}}cacheResult(e,t,n,r){let s=this.getCacheKey(e,t),o={result:n};if(r&&(o.expiry=Date.now()+r),this.cache[s]=o,this.cacheSizeLimit&&Object.keys(this.cache).length>this.cacheSizeLimit){let e=Object.values(this.cache).reduce(((e,t)=>e.expiry<t.expiry?e:t));this.evictCache(this.getCacheKey(e))}this.notifySubscribers(e,t,n)}getCacheKey(e,t){return e.toString()+JSON.stringify(t)}async queryParallel(e){return await Promise.all(e.map((e=>this.query(e))))}evictCache(e){delete this.cache[e]}async queryWithSharding(e,t){try{let n=Math.ceil(e.length/t),r=[];for(let s=0;s<t;s++){let t=s*n;r.push(e.slice(t,t+n))}this.shards=r;let s=await Promise.all(r.map((e=>this.queryParallel(e)))),o=s.flat(),i=r.map((e=>{let t=e.map((e=>{let t=this.getCacheKey(e),n=this.cache[t];return{query:e.toString(),result:n?n.result:null}}));return{queries:t}}));return console.log(i),this.shardsessions=i,o}catch(t){throw console.error(`Error executing query with sharding: ${t}`),t}}saveCache(e){e(this.cache)}saveShardSessions(e){let t=JSON.stringify(this.shardSessions);fs.writeFileSync(e,t)}async reloadShards(){return(await Promise.all(this.shards.map((e=>this.queryParallel(e))))).flat()}}export default{Lazy:Lazy,JsonHandler:JsonHandler};window.Lazy=Lazy,window.JsonHandler=JsonHandler;export class ReactRouter{constructor(){this.routes={},this.currentUrl="",this.store={},this.rootElement=null,this.hashChangeListener=null}route(e){this.routes[e]=!0}root(e,t){let n=[],r=[];window.location.hash=e;let s=e.split("/").map((e=>e.startsWith(":")?(n.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(n.push(e.substring(1)),"(.*)"):e.startsWith("?")?(r.push(e.substring(1)),"([^/]+)"):e)).join("/"),o=RegExp("^"+s+"(\\?(.*))?$");if(this.routes[e]=!0,this.currentUrl=e,window.location.hash.substring(1).match(o)){let r=window.location.hash.substring(1).match(o),s={};for(let e=0;e<n.length;e++)s[n[e]]=r[e+1];if(e.includes(":")&&window.location.hash.substring(1).split("?")[1])return console.error("Cannot use query params with path params",e,window.location.hash.substring(1).split("?")[1]),!1;let i={},a=window.location.hash.substring(1).split("?")[1];if(a){let e=a.split("&");for(let t,n=0;n<e.length;n++)t=e[n].split("="),i[t[0]]=t[1]}let l={params:s,query:i,url:window.location.hash.substring(1),method:"ROOT_GET"},d=!1;return this.hashChangeListener||(this.hashChangeListener=()=>{if(window.location.hash.substring(1).match(o)){let e=window.location.hash.substring(1).match(o),r={};for(let t=0;t<n.length;t++)r[n[t]]=e[t+1];let s={params:r,rootUrl:this.currentUrl,url:window.location.hash.substring(1)};t(s,{json:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{let t=JSON.stringify(e);document.getElementById(this.rootElement).innerHTML=`<pre>${t}</pre>`,d=!0}catch(e){throw Error("Invalid JSON data")}},title(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,d=!0},saveState(){if(d)throw Error("State has already been saved cannot save again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},restoreState:()=>{if(d)throw Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.location.hash=window.sessionStorage.getItem(e)?window.sessionStorage.getItem(e):this.currentUrl,d=!0},send:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),d=!0},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=e+"Code: "+t,d=!0},redirect(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},sendFile:e=>{let t=this.rootElement;if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){e.endsWith(".png")?document.getElementById(t).innerHTML=`<img src="${e}" />`:e.endsWith(".json")&&fetch(e).then((e=>e.json())).then((e=>{let n=JSON.stringify(e);document.getElementById(t).innerHTML=`<textarea style="width:100%;height:100%; resize:none; border:none;">${n}</textarea>`}));let r=document.createElement("a");r.href=window.URL.createObjectURL(n.response),r.download=e,r.click()},n.send()}})}},window.addEventListener("hashchange",this.hashChangeListener)),t(l,{json:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{let t=JSON.stringify(e);document.getElementById(this.rootElement).innerHTML=`<pre>${t}</pre>`,d=!0}catch(e){throw Error("Invalid JSON data")}},setCookie(e,t,n){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let r=`${e}=${t};`;n&&(n.path&&(r+=`path=${n.path};`),n.domain&&(r+=`domain=${n.domain};`),n.maxAge&&(r+=`max-age=${n.maxAge};`),n.httpOnly&&(r+=`httpOnly=${n.httpOnly};`),n.secure&&(r+=`secure=${n.secure};`),n.sameSite&&(r+=`sameSite=${n.sameSite};`)),document.cookie=r},getCookie(e){let t=document.cookie.split(";");for(let n=0;n<t.length;n++){let r=t[n].trim(),s=r.split("=")[0];if(s===e){let e=r.split("=")[1];return r.split(";").slice(1).map((e=>{let[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{}),{name:s,value:e}}}return null},title(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,d=!0},saveState(){if(d)throw Error("State has already been saved cannot save again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},ip(){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");d=!0;let e=new XMLHttpRequest;e.open("GET","https://api.ipify.org?format=json",!1),e.onload=function(){if(200===e.status){return JSON.parse(e.responseText).ip}console.log("IP Request Failed")}},restoreState:()=>{if(d)throw Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.location.hash=window.sessionStorage.getItem(e)?window.sessionStorage.getItem(e):this.currentUrl,d=!0},send:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),d=!0},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=e+"Code: "+t,d=!0},redirect(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},sendFile:e=>{let t=this.rootElement;if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){e.endsWith(".png")?document.getElementById(t).innerHTML=`<img src="${e}" />`:e.endsWith(".json")&&fetch(e).then((e=>e.json())).then((e=>{let n=JSON.stringify(e);document.getElementById(t).innerHTML=`<textarea style="width:100%;height:100%; resize:none; border:none;">${n}</textarea>`}));let r=document.createElement("a");r.href=window.URL.createObjectURL(n.response),r.download=e,r.click()},n.send()}}),!0}return!1}bindRoot(e){this.rootElement=e}onload(e){window.onload=()=>{window.addEventListener("DOMContentLoaded",e())}}get(e,t){let n=[],r=[],s=e.split("/").map((e=>e.startsWith(":")?(n.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(n.push(e.substring(1)),"(.*)"):e.startsWith("?")?(r.push(e.substring(1)),"([^/]+)"):e)).join("/"),o=RegExp("^"+s+"(\\?(.*))?$");if(this.routes[e]=!0,this.currentUrl=e,window.location.hash.substring(1).match(o)){let r=window.location.hash.substring(1).match(o),s={};for(let e=0;e<n.length;e++)s[n[e]]=r[e+1];if(e.includes(":")&&window.location.hash.substring(1).split("?")[1])return console.error("Cannot use query params with path params",e,window.location.hash.substring(1).split("?")[1]),!1;let i={},a=window.location.hash.substring(1).split("?")[1];if(a){let e=a.split("&");for(let t,n=0;n<e.length;n++)t=e[n].split("="),i[t[0]]=t[1]}let l={params:s,query:i,url:window.location.hash.substring(1),method:"GET"},d=!1;return this.hashChangeListener||(this.hashChangeListener=()=>{if(window.location.hash.substring(1).match(o)){let e=window.location.hash.substring(1).match(o),r={};for(let t=0;t<n.length;t++)r[n[t]]=e[t+1];let s={params:r,rootUrl:this.currentUrl,url:window.location.hash.substring(1)};t(s,{json:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{let t=JSON.stringify(e);document.getElementById(this.rootElement).innerHTML=`<pre>${t}</pre>`,d=!0}catch(e){throw Error("Invalid JSON data")}},setCookie(e,t,n){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let r=`${e}=${t};`;n&&(n.path&&(r+=`path=${n.path};`),n.domain&&(r+=`domain=${n.domain};`),n.maxAge&&(r+=`max-age=${n.maxAge};`),n.httpOnly&&(r+=`httpOnly=${n.httpOnly};`),n.secure&&(r+=`secure=${n.secure};`),n.sameSite&&(r+=`sameSite=${n.sameSite};`)),document.cookie=r},ip(){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");d=!0;let e=new XMLHttpRequest;e.open("GET","https://api.ipify.org?format=json",!1),e.onload=function(){if(200===e.status){return JSON.parse(e.responseText).ip}console.log("IP Request Failed")}},getCookie(e){let t=document.cookie.split(";");for(let n=0;n<t.length;n++){let r=t[n].trim(),s=r.split("=")[0];if(s===e){let e=r.split("=")[1];return r.split(";").slice(1).map((e=>{let[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{}),{name:s,value:e}}}return null},title(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,d=!0},saveState(){if(d)throw Error("State has already been saved cannot save again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},restoreState:()=>{if(d)throw Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.location.hash=window.sessionStorage.getItem(e)?window.sessionStorage.getItem(e):this.currentUrl,d=!0},send:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),d=!0},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=e+"Code: "+t,d=!0},redirect(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},compress(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let t=new CompressionStream("gzip"),n=(new TextEncoder).encode(e);t.encode(n),d=!0},sendFile:e=>{let t=this.rootElement;if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){e.endsWith(".png")?document.getElementById(t).innerHTML=`<img src="${e}" />`:e.endsWith(".json")&&fetch(e).then((e=>e.json())).then((e=>{let n=JSON.stringify(e);document.getElementById(t).innerHTML=`<textarea style="width:100%;height:100%; resize:none; border:none;">${n}</textarea>`}));let r=document.createElement("a");r.href=window.URL.createObjectURL(n.response),r.download=e,r.click()},n.send()}})}},window.addEventListener("hashchange",this.hashChangeListener)),t(l,{json:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{let t=JSON.stringify(e);document.getElementById(this.rootElement).innerHTML=`<pre>${t}</pre>`,d=!0}catch(e){throw Error("Invalid JSON data")}},setCookie(e,t,n){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let r=`${e}=${t};`;n&&(n.path&&(r+=`path=${n.path};`),n.domain&&(r+=`domain=${n.domain};`),n.maxAge&&(r+=`max-age=${n.maxAge};`),n.httpOnly&&(r+=`httpOnly=${n.httpOnly};`),n.secure&&(r+=`secure=${n.secure};`),n.sameSite&&(r+=`sameSite=${n.sameSite};`)),document.cookie=r},getCookie(e){let t=document.cookie.split(";");for(let n=0;n<t.length;n++){let r=t[n].trim(),s=r.split("=")[0];if(s===e){let e=r.split("=")[1];return r.split(";").slice(1).map((e=>{let[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{}),{name:s,value:e}}}return null},title(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,d=!0},saveState(){if(d)throw Error("State has already been saved cannot save again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},restoreState:()=>{if(d)throw Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.location.hash=window.sessionStorage.getItem(e)?window.sessionStorage.getItem(e):this.currentUrl,d=!0},send:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),d=!0},ip(){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");d=!0;let e=new XMLHttpRequest;e.open("GET","https://api.ipify.org?format=json",!1),e.onload=function(){if(200===e.status){return JSON.parse(e.responseText).ip}console.error("IP Request Failed")}},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=e+"Code: "+t,d=!0},redirect(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},sendFile:e=>{let t=this.rootElement;if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){e.endsWith(".png")?document.getElementById(t).innerHTML=`<img src="${e}" />`:e.endsWith(".json")&&fetch(e).then((e=>e.json())).then((e=>{let n=JSON.stringify(e);document.getElementById(t).innerHTML=`<textarea style="width:100%;height:100%; resize:none; border:none;">${n}</textarea>`}));let r=document.createElement("a");r.href=window.URL.createObjectURL(n.response),r.download=e,r.click()},n.send()}}),!0}return console.log("Router is already initialized"),!1}on(e,t){window.addEventListener("hashchange",(()=>{let n=[],r=[],s=e.split("/").map((e=>e.startsWith(":")?(n.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(n.push(e.substring(1)),"(.*)"):e.startsWith("?")?(r.push(e.substring(1)),"([^/]+)"):e)).join("/"),o=RegExp("^"+s+"(\\?(.*))?$");if(this.routes[e]=!0,this.currentUrl=e,window.location.hash.substring(1).match(o)){let r=window.location.hash.substring(1).match(o),s={};for(let e=0;e<n.length;e++)s[n[e]]=r[e+1];if(e.includes(":")&&window.location.hash.substring(1).split("?")[1])return console.error("Cannot use query params with path params",e,window.location.hash.substring(1).split("?")[1]),!1;let i={},a=window.location.hash.substring(1).split("?")[1];if(a){let e=a.split("&");for(let t,n=0;n<e.length;n++)t=e[n].split("="),i[t[0]]=t[1]}let l={params:s,query:i,url:window.location.hash.substring(1),method:"POST"},d=!1;t(l,{json:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{let t=JSON.stringify(e);document.getElementById(this.rootElement).innerHTML=`<pre>${t}</pre>`,d=!0}catch(e){throw Error("Invalid JSON data")}},title(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,d=!0},setCookie(e,t,n){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let r=`${e}=${t};`;n&&(n.path&&(r+=`path=${n.path};`),n.domain&&(r+=`domain=${n.domain};`),n.maxAge&&(r+=`max-age=${n.maxAge};`),n.httpOnly&&(r+=`httpOnly=${n.httpOnly};`),n.secure&&(r+=`secure=${n.secure};`),n.sameSite&&(r+=`sameSite=${n.sameSite};`)),document.cookie=r},getCookie(e){let t=document.cookie.split(";");for(let n=0;n<t.length;n++){let r=t[n].trim(),s=r.split("=")[0];if(s===e){let e=r.split("=")[1];return r.split(";").slice(1).map((e=>{let[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{}),{name:s,value:e}}}return null},saveState(){if(d)throw Error("State has already been saved cannot save again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},restoreState:()=>{if(d)throw Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.location.hash=window.sessionStorage.getItem(e)?window.sessionStorage.getItem(e):this.currentUrl,d=!0},send:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),d=!0},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=e+"Code: "+t,d=!0},ip(){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");d=!0;let e=new XMLHttpRequest;e.open("GET","https://api.ipify.org?format=json",!1),e.onload=function(){if(200===e.status){return JSON.parse(e.responseText).ip}console.log("IP Request Failed")}},redirect(e){if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},sendFile:e=>{let t=this.rootElement;if(d)throw Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){e.endsWith(".png")?document.getElementById(t).innerHTML=`<img src="${e}" />`:e.endsWith(".json")&&(console.log("json"),fetch(e).then((e=>e.json())).then((e=>{let n=JSON.stringify(e);document.getElementById(t).innerHTML=`<textarea style="width:100%;height:100%; resize:none; border:none;">${n}</textarea>`})));let r=document.createElement("a");r.href=window.URL.createObjectURL(n.response),r.download=e,r.click()},n.send()}})}}))}error(e){window.onhashchange=t=>{let n=t.newURL.split("#")[1];this.routes[n]||e()}}}window.ReactRouter=ReactRouter;var totalSize=0;let precached=!1,cache={};window.require=e=>{if(!e)throw Error("require() must be called with a path!");if(e.startsWith("@tailwind/")||e.startsWith("@tailwind")){if(document.getElementById("tailwindcss"))throw Error('Tailwind CSS already loaded please remove duplicate require("@tailwind")');if(e.startsWith("@tailwind/")){e=(e=e.replace("@tailwind/","")).replace("/",",");let t=document.createElement("link");t.rel="preload",t.as="script",t.href=`https://cdn.tailwindcss.com?plugins=${e}`,document.head.appendChild(t);let n=document.createElement("script");n.src=`https://cdn.tailwindcss.com?plugins=${e}`,n.id="tailwindcss",document.getElementById("tailwindcss")||document.head.appendChild(n),document.body.style.visibility="hidden",n.onload=()=>{document.head.removeChild(n),console.log(`Tailwind CSS loaded with plugins ${e}`),document.body.style.visibility="visible"}}else{let e=document.createElement("script");e.src="https://cdn.tailwindcss.com",e.id="tailwindcss",document.getElementById("tailwindcss")||document.head.appendChild(e),document.body.style.visibility="hidden",e.onload=()=>{document.head.removeChild(e),console.log("Tailwind CSS loaded"),document.body.style.visibility="visible"}}}else{if(e.startsWith("@react-bootstrap")){let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/react-bootstrap@next/dist/react-bootstrap.min.js",e.id="react-bootstrap";let t=document.createElement("link");return t.href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css",t.rel="stylesheet",t.integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65",t.crossOrigin="anonymous",document.body.style.visibility="hidden",document.getElementById("react-bootstrap")||(document.head.appendChild(e),document.head.appendChild(t)),void(e.onload=()=>{console.log("React BootStrap loaded"),document.head.removeChild(e),document.body.style.visibility="visible"})}if(e.endsWith(".css"))if(cache[e]){let t=cache[e];totalSize+=t.length;let n=new CSSStyleSheet;n.replaceSync(t),document.body.style.visibility="hidden",document.adoptedStyleSheets=[...document.adoptedStyleSheets,n],document.onload=()=>{document.body.style.visibility="visible"}}else{let t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null),cache[e]=t.responseText,totalSize+=cache[e].length;let n=cache[e],r=new CSSStyleSheet;r.replaceSync(n),document.body.style.visibility="hidden",document.adoptedStyleSheets=[...document.adoptedStyleSheets,r],document.onload=()=>{document.body.style.visibility="visible"}}else{if(e.endsWith(".tsx")){let t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);let n=t.responseText;totalSize+=n.length;let r=Babel.transform(n,{presets:["typescript","react"],filename:"app.tsx"}).code;document.head.getAttribute("data-tsx")||document.head.setAttribute("data-tsx","true");let s=e.split("/").pop().split(".tsx")[0];return Function(`\n          return function(props){\n            ${r}\n            return React.createElement(${s}, props);\n          }\n        `)()}if(e.endsWith(".ts")){if(cache[e]){let t=cache[e];totalSize+=t.length;let n=Babel.transform(t,{presets:["typescript","react"],filename:"app.ts"}).code;return document.head.getAttribute("data-ts")||document.head.setAttribute("data-ts","true"),Function(n)()}{let t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null),cache[e]=t.responseText,totalSize+=cache[e].length;let n=cache[e],r=Babel.transform(n,{presets:["typescript","react"],filename:"app.ts"}).code;return document.head.getAttribute("data-ts")||document.head.setAttribute("data-ts","true"),Function(r)()}}if(!(e.endsWith(".jsx")||e.endsWith(".json")||e.endsWith(".ts")||e.endsWith(".tsx")))throw Error("Unknown file type or component");if(!cache[e]){let t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);let n=t.responseText;totalSize+=n.length;let r=e.split("/").pop().split(".jsx")[0],s=Babel.transform(n,{presets:["es2015","react"],filename:"app.jsx"}).code;return cache[e]=s,Function(`\n          return function(props){\n            ${s}\n            return React.createElement(${r}, props);\n          }\n        `)()}if(cache[e]){console.log("cached");let t=e.split("/").pop().split(".jsx")[0];return Function(`\n          return function(props){\n            ${cache[e]}\n            return React.createElement(${t}, props);\n          }\n    `)()}}}},window.tailwind={config(e){if(!e)throw Error("Tailwind  config is required");if(!document.getElementById("tailwindcss"))throw Error('Tailwind CSS not loaded please use |  require("@tailwind")');tailwind.config=e},registerComponent(e){if(!e)throw Error("Component path is required");if(!e.endsWith(".css"))throw Error("Component must be a css file");if(!document.getElementById("tailwindcss"))throw Error('Tailwind CSS not loaded please use |  require("@tailwind")');let t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null),totalSize+=t.responseText.length;let n=t.responseText;(new CSSStyleSheet).replace(n),document.adoptedStyleSheets=[...document.adoptedStyleSheets,stylesheet],console.log("css file imported!")}},window.getBundleSize=()=>{for(var e in cache)totalSize+=cache[e].length;let t=totalSize+document.documentElement.innerHTML.length,n=0,r=parseInt(t,10)||0;for(;1024<=r&&++n;)r/=1024;return`Bundle Size: ${r.toFixed(10<=r||1>n?0:1)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}`},window.onload=()=>{"production"==document.querySelector("html").getAttribute("data-env")?(document.querySelectorAll("script").forEach((e=>{let t=document.createElement("link");t.rel="prefetch",t.href=e.src,t.as="script",document.head.appendChild(t)})),document.querySelectorAll("img").forEach((e=>{let t=document.createElement("link");t.rel="prefetch",t.href=e.src,t.as="image",document.head.appendChild(t),e.setAttribute("loading","lazy")})),document.querySelectorAll("link").forEach((e=>{"stylesheet"==e.rel&&(e.setAttribute("rel","preload"),e.setAttribute("as","style"))}))):console.warn("%cVisijs Development mode + please do not use development mode in production!","color: green; font-size: 20px;")},window.prefetch=async e=>{console.log("Using prefetch config");let t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);let n=t.responseText;JSON.parse(n).prefetch.forEach((async t=>{if(t.endsWith(".css")){let e=new XMLHttpRequest;await e.open("GET",t,!1),e.send(null);let n=e.responseText,r=new CSSStyleSheet;r.replace(n),document.adoptedStyleSheets=[...document.adoptedStyleSheets,r],console.log("css file imported!");let s=0,o=n.length;for(;1024<o;)o/=1024,s++;console.log(`%cPrefetched ${t} | ${Math.round(o)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`,"color: violet; font-weight: bold; font-size: 1.2em")}else if(t.endsWith(".jsx")){let e=new XMLHttpRequest;await e.open("GET",t,!1),e.send(null);let n=e.responseText;t.split("/").pop().split(".jsx")[0];let r=await Babel.transform(n,{presets:["es2015","react"],filename:"app.jsx"}).code;cache[t]=r;let s=r.length,o=0;for(;1024<s;)s/=1024,o++;console.log(`%cPrefetched ${t} | ${Math.round(s)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`,"color: violet; font-weight: bold; font-size: 1.2em;")}else if(t.endsWith(".tsx")){let e=new XMLHttpRequest;e.open("GET",t,!1),e.send(null);let n=e.responseText;t.split("/").pop().split(".jsx")[0];let r=await Babel.transform(n,{presets:["es2015","typescript","react"],filename:"app.tsx"}).code;cache[t]=r;let s=r.length,o=0;for(;1024<s;)s/=1024,o++;console.log(`%cPrefetched ${t} | ${Math.round(s)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`,"color: violet; font-weight: bold; font-size: 1.2em;")}else if(e.endsWith(".ts")){let e=new XMLHttpRequest;e.open("GET",t,!1),e.send(null);let n=await Babel.transform(e.responseText,{presets:["es2015","typescript"],filename:"app.ts"}).code;cache[t]=n;let r=n.length,s=0;for(;1024<r;)r/=1024,s++;console.log(`%cPrefetched ${t} | ${Math.round(r)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`,"color: violet; font-weight: bold; font-size: 1.2em;")}}))},window.useState=React.useState,window.useEffect=React.useEffect,window.useContext=React.useContext,window.useReducer=React.useReducer,window.useRef=React.useRef,window.useCallback=React.useCallback,window.lazy=React.lazy,window.forwardRef=React.forwardRef,window.createContext=React.createContext,window.startTransition=React.startTransition,window.useSyncExternalStore=React.useSyncExternalStore,window.useMemo=React.useMemo,window.useLayoutEffect=React.useLayoutEffect,window.useInsertionEffect=React.useInsertionEffect,window.useImperativeHandle=React.useImperativeHandle,window.useId=React.useId,window.useDeferredValue=React.useDeferredValue,window.useTransition=React.useTransition,window.ReactRouter=ReactRouter,window.Lazy=new React.lazy,window.JsonHandler=JsonHandler,window.ErrorTrace=ErrorTrace;let root=null;window.multiThread=(e,t)=>{for(let n,r=0;r<e;r++)n=new Worker((function(){self.onmessage=function(e){let n=e.data.id,r=t(n);self.postMessage({id:n,result:r})}})),n.postMessage({id:r}),n.onmessage=function(e){console.log(`Worker ${e.data.id} returned ${e.data.result}`)}},window.React._render=e=>t=>{let n=document.getElementById(t);root||(root=ReactDOM.createRoot(n)),root.render(e)},console.log("%cvisi.js v1.4.2 loaded","color: black;   border-radius:5px; font-size: 20px; padding: 10px;"),"production"==document.querySelector("html").getAttribute("data-env")&&(document.body.innerHTML=document.body.innerHTML.replace(/\s{2,}/g," "));export function ErrorTrace(){window.onerror=function(e,t,n,r,s){console.log(e,t,n,r,s),document.title="Error"+e,document.head.innerHTML='\n        <meta charset="utf-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">\n        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">\n        <style>\n        body {\n          background-color: white;\n          color: black;\n          transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;\n        }\n        \n        .dark-mode {\n          background-color: #1f1f1f;\n          color: white;\n          transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;\n        }\n        .code-block {\n          background: #050505;\n     \n          color: #d4d4d4;\n          font-size: 14px;\n          font-family: \'Courier New\', Courier, monospace;\n          padding: 10px;\n          border-radius: 4px;\n          overflow-x: auto;\n     \n        }\n        \n        .line-number {\n          display: inline-block;\n          width: 30px;\n          text-align: right;\n          margin-right: 10px;\n          color: #999;\n        }\n        \n        .line-content {\n          display: inline-block;\n          margin-left: 10px;\n        }\n        \n        </style>\n     \n        ';let o=new XMLHttpRequest;o.open("GET",t,!1),o.send();let i=o.responseText.split("\n"),a=i[n-1],l=n;80<a.length&&(a=a.substring(0,80)+"...");let d=s.name,h=s.stack,c="";for(let e=Math.max(0,l-5);e<Math.min(i.length,l+5);e++){let t=e+1,n=i[e],r="";e==l?(r="text-danger",c+=`<span class="rounded bg-danger">${t}: ${a}</span><br>`):c+=`<span>${t}: ${n}</span><br>`}document.body.innerHTML=`\n        <div class="container" style="padding: 50px;">\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">\n            <h2 class="text-danger">Error ${e} occurred</h2>\n            <i id="toggle-dark-mode-btn" class="bi bi-moon-fill" style="cursor: pointer; font-size: 2rem;"></i>\n  \n          </div>\n          <p class="text-secondary">${t}:${n}:${r}</p>\n          <p class="text-secondary">${d}</p>\n          <p class="text-secondary">${h}</p>\n          <p class="text-secondary">${r}</p>\n          <div class="code-block">${c}</div>\n        </div>\n      `;let u=document.querySelector("#toggle-dark-mode-btn"),f=document.querySelector("body");u.addEventListener("click",(()=>{f.classList.toggle("dark-mode"),f.classList.toggle("text-white"),document.querySelectorAll(".code-block ").forEach((e=>{e.classList.toggle("text-white"),e.classList.toggle("bg-secondary")}))}))},console.log("ErrorTrace loaded")}window.ErrorTrace=ErrorTrace;