async function e(e=null){new Promise(((t,n)=>{if(!e)throw new Error("[Library Manager]: No path provided");let s=JSON.parse(localStorage.getItem("lib_modules"))||{};const o="cfr"===document.querySelector("html").getAttribute("data-render");if(e.startsWith("@tailwind/daisyui")){let t=e.split("/daisyui@")[1];if(console.log(t),o)if(s.daisyui&&s.daisyuiVersion===t){let e=performance.now(),t=document.createElement("style");t.innerHTML=s.daisyui;let n=document.createElement("script");n.innerHTML=s.tailwindcss,document.body.style.display="none",document.head.appendChild(n),document.head.appendChild(t),t.onload=()=>{c.enabled&&console.log(`[VISI] DaisyUI loaded in ${performance.now()-e}ms`)},document.body.style.display="block"}else{let e=document.createElement("script"),n=document.createElement("link");document.body.style.display="none",n.rel="preload",n.as="script",n.href="https://cdn.tailwindcss.com",e.src="https://cdn.tailwindcss.com",e.id="tailwindcss";let o=document.createElement("link");o.rel="stylesheet",o.href=`https://cdn.jsdelivr.net/npm/daisyui@${t}/dist/full.css`,document.head.appendChild(o),document.head.appendChild(e),e.onload=()=>{setTimeout((()=>{document.body.style.display="block"}),20),document.head.removeChild(e)},fetch("https://cdn.jsdelivr.net/npm/visi.js@1.8.6-stable/modules/tailwind.min.js").then((e=>e.text())).then((e=>{s.tailwindcss=e,localStorage.setItem("lib_modules",JSON.stringify(s));let t=document.createElement("script");t.innerHTML=e,document.head.appendChild(t)})).catch((e=>{console.log(e)})),fetch(`https://cdn.jsdelivr.net/npm/daisyui@${t}/dist/full.css`).then((e=>e.text())).then((e=>{s.daisyui=e,s.daisyuiVersion=t,localStorage.setItem("lib_modules",JSON.stringify(s));let n=document.createElement("style");n.innerHTML=e,document.head.appendChild(n)}))}else{let e=document.createElement("link");e.rel="preload",e.as="script",e.href="https://cdn.tailwindcss.com",document.head.appendChild(e);let n=document.createElement("link");n.rel="preload",n.as="style",n.href=`https://cdn.jsdelivr.net/npm/daisyui@${t}/dist/full.css`,document.head.appendChild(n);let s=document.createElement("script");s.src="https://cdn.tailwindcss.com",s.id="tailwindcss",document.head.appendChild(s);let o=document.createElement("link");o.rel="stylesheet",o.href=`https://cdn.jsdelivr.net/npm/daisyui@${t}/dist/full.css`,document.head.appendChild(o),document.getElementById("tailwindcss")||document.head.appendChild(s),s.onload=()=>{document.head.removeChild(s),c.enabled&&console.log(`[VISI] TailwindCSS loaded in ${performance.now()-start}ms`)}}}if(e.startsWith("@tailwind/core"))if(o){if(!s.tailwindcore){fetch("https://cdn.jsdelivr.net/npm/visi.js@1.8.6-stable/modules/tailwind.min.js").then((e=>e.text())).then((e=>{s.tailwindcss=e,localStorage.setItem("lib_modules",JSON.stringify(s))})).catch((e=>{console.log(e)})),console.log("Loading tailwindcss from CDN");let e=document.createElement("script");e.innerHTML=s.tailwindcss,document.head.appendChild(e)}}else{let e=document.createElement("link");e.rel="preload",e.as="script",e.href="https://cdn.tailwindcss.com",document.head.appendChild(e);let t=document.createElement("script");t.src="https://cdn.tailwindcss.com",t.id="tailwindcss",document.head.appendChild(t),document.getElementById("tailwindcss")||document.head.appendChild(t),t.onload=()=>{document.head.removeChild(t)}}if(e.startsWith("@tailwindcss")){let t=e.split("@tailwindcss/")[1];if(t=t.split(","),o)if(s.tailwindcss){let e=document.createElement("script"),n=`https://cdn.tailwindcss.com?plugins=${t}`;e.src=n,e.id="tailwindcss",document.head.appendChild(e),e.onload=()=>{document.head.removeChild(e)}}else{fetch("https://cdn.jsdelivr.net/npm/visi.js@1.8.6-stable/modules/tailwind.min.js").then((e=>e.text())).then((e=>{s.tailwindcss=e,localStorage.setItem("lib_modules",JSON.stringify(s)),window.location.reload()})).catch((e=>{console.log(e)})),console.log("Loading tailwindcss from CDN");let e=document.createElement("script");e.innerHTML=s.tailwindcss,document.head.appendChild(e)}}if(e.startsWith("@bootstrap/core")){let t=e.split("@bootstrap/core@")[1];if(o)if(!s.bootstrapcss&&!s.bootstrapjs||s.bootstrapVersion!==t)fetch(`https://cdn.jsdelivr.net/npm/bootstrap@${t}/dist/css/bootstrap.min.css`).then((e=>e.text())).then((e=>{s.bootstrapcss=e,s.bootstrapVersion=t,localStorage.setItem("lib_modules",JSON.stringify(s)),document.createElement("style").innerHTML=e})),fetch(`https://cdn.jsdelivr.net/npm/bootstrap@${t}/dist/js/bootstrap.bundle.min.js`).then((e=>e.text())).then((e=>{s.bootstrapjs=e,localStorage.setItem("lib_modules",JSON.stringify(s));let t=document.createElement("script");t.innerHTML=e,document.head.appendChild(t)})).catch((e=>{console.log(e)}));else{c.enabled&&console.log(`[VISI] Bootstrap v${t} loaded from cache`);let e=document.createElement("script");e.innerHTML=s.bootstrapjs,document.head.appendChild(e);let n=document.createElement("style");n.innerHTML=s.bootstrapcss,document.head.appendChild(n)}else{let e=performance.now(),n=document.createElement("link");n.rel="preload",n.as="script",n.href=`https://cdn.jsdelivr.net/npm/bootstrap@${t}/dist/js/bootstrap.min.js`;let s=document.createElement("link");s.rel="stylesheet",s.href=`https://cdn.jsdelivr.net/npm/bootstrap@${t}/dist/css/bootstrap.min.css`,document.head.appendChild(s),document.head.appendChild(n);let o=document.createElement("script");o.src=`https://cdn.jsdelivr.net/npm/bootstrap@${t}/dist/js/bootstrap.min.js`,o.id="bootstrap",document.getElementById("bootstrap")||(document.head.appendChild(o),o.onload=()=>{document.head.removeChild(o),c.enabled&&console.log(`Bootstrap loaded in ${performance.now()-e}ms`)})}}if(e.startsWith("@bootstrap/icons")){let t=e.split("@bootstrap/icons@")[1];if(o)if(s.bootstrapicons){let e=document.createElement("style");e.innerHTML=s.bootstrapicons,document.head.appendChild(e)}else fetch(`https://cdn.jsdelivr.net/npm/bootstrap-icons@${t}/font/bootstrap-icons.css`).then((e=>e.text())).then((e=>{s.bootstrapicons=e,localStorage.setItem("lib_modules",JSON.stringify(s));let t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})).catch((e=>{console.log(e)}));else{let e=document.createElement("link");e.rel="preload",e.as="style",e.href=`https://cdn.jsdelivr.net/npm/bootstrap-icons@${t}/font/bootstrap-icons.css`,document.head.appendChild(e);let n=document.createElement("link");n.rel="stylesheet",n.href=`https://cdn.jsdelivr.net/npm/bootstrap-icons@${t}/font/bootstrap-icons.css`}}if(e.startsWith("@d3.js")){let t=e.split("@d3.js@")[1]||"7",n=`https://cdn.jsdelivr.net/npm/d3@${t}/+esm`;if(o)if(s.d3&&s.d3Version===t){let e=document.createElement("script");e.innerHTML=s.d3,document.head.appendChild(e)}else fetch(n).then((e=>e.text())).then((e=>{s.d3=e,localStorage.setItem("lib_modules",JSON.stringify(s));let t=document.createElement("script");t.innerHTML=e,document.head.appendChild(t)})).catch((e=>{console.log(e)}));else{let e=document.createElement("link");e.rel="preload",e.as="script",e.href=n,document.head.appendChild(e);let t=document.createElement("script");t.src=n,t.id="d3",document.head.appendChild(t),t.onload=()=>{document.head.removeChild(t)}}}if(e.startsWith("@chart.js")){let t=e.split("@chart.js@")[1]||"4.3.0",n=`https://cdn.jsdelivr.net/npm/chart.js@${t}/dist/chart.umd.min.js`;if(o)if(s.chartjs&&s.chartjsVersion===t){let e=document.createElement("script");e.innerHTML=s.chartjs,document.head.appendChild(e)}else fetch(n).then((e=>e.text())).then((e=>{s.chartjs=e,s.chartjsVersion=t,localStorage.setItem("lib_modules",JSON.stringify(s));let n=document.createElement("script");n.innerHTML=e,document.head.appendChild(n)})).catch((e=>{console.log(e)}));else{let e=document.createElement("link");e.rel="preload",e.as="script",e.href=n,document.head.appendChild(e);let t=document.createElement("script");t.src=n,t.id="chartjs",document.head.appendChild(t),t.onload=()=>{document.head.removeChild(t)}}}if(e.startsWith("@mastercss")){let t=e.split("@mastercss@")[1]||"css",n="css"===t?"https://cdn.master.co/css":`https://cdn.master.co/css@${t}`;if(o)if(s.mastercss&&s.mastercssVersion===t){let e=document.createElement("style");e.innerHTML=s.mastercss,document.head.appendChild(e)}else fetch(n).then((e=>e.text())).then((e=>{s.mastercss=e,s.mastercssVersion=t,localStorage.setItem("lib_modules",JSON.stringify(s));let n=document.createElement("style");n.innerHTML=e,document.head.appendChild(n)})).catch((e=>{console.log(e)}));else{let e=document.createElement("link");e.rel="preload",e.as="style",e.href=n,document.head.appendChild(e);let t=document.createElement("link");t.rel="stylesheet",t.href=n,document.head.appendChild(t)}}if(e.startsWith("@threejs")){let t=e.split("@threejs@")[1]||"latest",n=`https://cdn.jsdelivr.net/npm/three@${t}`;if(o)if(s.threejs&&s.threejsVersion===t){let e=document.createElement("script");e.innerHTML=s.threejs,document.head.appendChild(e)}else fetch(n).then((e=>e.text())).then((e=>{s.threejs=e,s.threejsVersion=t,localStorage.setItem("lib_modules",JSON.stringify(s));let n=document.createElement("script");n.innerHTML=e,document.head.appendChild(n)})).catch((e=>{console.log(e)}));else{let e=document.createElement("link");e.rel="preload",e.as="script",e.href=n,document.head.appendChild(e);let t=document.createElement("script");t.src=n,t.id="threejs",document.head.appendChild(t),t.onload=()=>{document.head.removeChild(t)}}}}))}async function t(e){let t=document.querySelector("html").getAttribute("data-env")||"development";try{const o="development"===t?await fetch(`https://unpkg.com/pako@${e}/dist/pako.js`):await fetch(`https://unpkg.com/pako@${e}/dist/pako.min.js`),r=await o.text(),a=await n();a.push({key:"pako",version:e,data:r}),await async function(e){try{const t=await s(),n=t.transaction("pako_cache","readwrite").objectStore("pako_cache");n.clear();for(const t of e)n.add(t)}catch(e){console.error("Failed to save Pako cache:",e)}}(a);let i=document.createElement("script");i.innerHTML=r,document.head.appendChild(i)}catch(e){console.error("Failed to load Pako from unpkg:",e)}}async function n(){try{const e=await s();if(e.objectStoreNames.contains("pako_cache")){const t=e.transaction("pako_cache","readonly"),n=t.objectStore("pako_cache").getAll();return new Promise(((e,t)=>{n.onsuccess=function(){e(n.result)},n.onerror=function(e){t(e.target.error)}}))}return[]}catch(e){return console.error("Failed to get Pako cache:",e),[]}}function s(){return new Promise(((e,t)=>{const n=window.indexedDB.open("pako_cache_db",1);n.onupgradeneeded=function(){const e=n.result;e.objectStoreNames.contains("pako_cache")||e.createObjectStore("pako_cache",{keyPath:"key"})},n.onsuccess=function(){e(n.result)},n.onerror=function(e){t(e.target.error)}}))}async function o(e){let t=document.querySelector("html").getAttribute("data-env")||"development";try{const n="development"===t?await fetch(`https://unpkg.com/react@${e}/umd/react.development.js`):await fetch(`https://unpkg.com/react@${e}/umd/react.production.min.js`),s=await n.text(),o="development"===t?await fetch(`https://unpkg.com/react-dom@${e}/umd/react-dom.development.js`):await fetch(`https://unpkg.com/react-dom@${e}/umd/react-dom.production.min.js`),i=await o.text();console.log(`[VISI] React version: ${e} loaded from unpkg`);const l=document.createElement("script");l.innerHTML=s,document.head.appendChild(l);const c=document.createElement("script");c.innerHTML=i,document.head.appendChild(c);const d=await r();d.push({key:"react",version:e,data:s}),d.push({key:"react-dom",version:e,data:i}),await async function(e){try{const t=await a(),n=t.transaction("react_cache","readwrite").objectStore("react_cache");n.clear();for(const t of e)n.add(t)}catch(e){console.error("Failed to save React cache:",e)}}(d),window.ReactDOM=ReactDOM,window.React=React}catch(e){console.error("Failed to load React from unpkg:",e)}}async function r(){try{const e=await a();if(e.objectStoreNames.contains("react_cache")){const t=e.transaction("react_cache","readonly").objectStore("react_cache");return new Promise(((e,n)=>{const s=t.getAll();s.onsuccess=function(){e(s.result)},s.onerror=function(e){n(e.target.error)}}))}return[]}catch(e){return console.error("Failed to get React cache:",e),[]}}function a(){return new Promise(((e,t)=>{const n=window.indexedDB.open("react_cache_db",1);n.onupgradeneeded=function(){const e=n.result;e.objectStoreNames.contains("react_cache")||e.createObjectStore("react_cache",{keyPath:"key"})},n.onsuccess=function(){e(n.result)},n.onerror=function(e){t(e.target.error)}}))}window.onload=()=>{let e=document.querySelector("html").hasAttribute("debug");if(!document.querySelector("html").hasAttribute("data-env")){e&&console.warn('⚠️ you are in development mode please set data-env="production" to enable production mode'),new PerformanceObserver((e=>{const t=[];for(const n of e.getEntries())"paint"===n.entryType?t.push({Metric:"Contentful Paint",Value:`${n.startTime} ms`}):"layout-shift"===n.entryType?t.push({Metric:"Layout Shift",Value:n.value}):"largest-contentful-paint"===n.entryType?t.push({Metric:"Largest Contentful Paint",Value:`${n.startTime} ms`}):t.push({Metric:n.name,Value:`${n.startTime} ms`});c.enabled&&(console.log("Performance metrics:"),console.table(t))})).observe({entryTypes:["paint","layout-shift","largest-contentful-paint"]})}"production"===document.querySelector("html").getAttribute("data-env")?(document.querySelectorAll("script[src]").forEach((t=>{const n=document.createElement("link");n.rel="preload",n.href=t.src,n.as="script",document.head.appendChild(n),e&&console.log(`[VISI] ${t.src} loaded`)})),document.querySelectorAll("img[src]").forEach((t=>{const n=new IntersectionObserver((s=>{if(s[0].isIntersecting){const s=t.dataset.src,o=document.createElement("link");o.rel="preload",o.as="image",o.href=t.src,document.head.appendChild(o),s&&(t.src=s,t.removeAttribute("src"),n.disconnect(),e&&console.log(`[VISI] ${t.src} loaded`))}}));n.observe(t)})),document.querySelectorAll('link[rel="stylesheet"]').forEach((e=>{const t=document.createElement("link");t.rel="preload",t.href=e.href,t.as="style",t.crossOrigin="anonymous",document.head.appendChild(t)}))):(console.warn("Not in production mode, skipping asset optimization."),console.log(getBundleSize()))},await async function(){const e=document.querySelector("html").hasAttribute("debug"),t="cfr"===document.querySelector("html").getAttribute("data-render"),n=document.querySelector("html").getAttribute("data-react-version")||"18.2.0";if(e&&(console.log(`[VISI] React version: ${n} loaded`),console.log("[VISI] Environment:",document.querySelector("html").getAttribute("data-env")||"production (default)")),t){const t=await fetch("https://registry.npmjs.org/react"),s=(await t.json())["dist-tags"].latest;n!==s?(await async function(){try{const e=await a();if(e.objectStoreNames.contains("react_cache")){const t=e.transaction("react_cache","readwrite");t.objectStore("react_cache").clear()}}catch(e){console.error("Failed to clear React cache:",e)}}(),await o(s)):e&&console.log(`[VISI] React version: ${n} is up to date`);const i="18.2.0",l=await r(),c=l.find((e=>"react"===e.key)),d=l.find((e=>"react-dom"===e.key));if(c&&d){let e=document.createElement("script");e.innerHTML=c.data,document.head.appendChild(e);let t=document.createElement("script");t.innerHTML=d.data,document.head.appendChild(t),window.ReactDOM=ReactDOM,window.React=React}else await o(i)}}(),await async function(){const e=document.querySelector("html").hasAttribute("debug"),o="cfr"===document.querySelector("html").getAttribute("data-render"),r="2.1.0";if(e&&(console.log(`[VISI] Pako version: ${r} loaded`),console.log("[VISI] Environment:",document.querySelector("html").getAttribute("data-env")||"production (default)")),o){const o=await fetch("https://registry.npmjs.org/pako"),a=(await o.json())["dist-tags"].latest;r!==a?(await async function(){try{const e=await s();if(e.objectStoreNames.contains("pako_cache")){const t=e.transaction("pako_cache","readwrite");t.objectStore("pako_cache").clear()}}catch(e){console.error("Failed to clear Pako cache:",e)}}(),await t(a)):e&&console.log(`[VISI] Pako version: ${r} is up to date`);const i="2.1.0",l=(await n()).find((e=>"pako"===e.key));if(l){let e=document.createElement("script");e.innerHTML=l.data,document.head.appendChild(e)}else await t(i)}}();class i{constructor(e){this.data=e,this.subscribers=new Set,this.store={},this.totalSize=0}map(e){const t=this.data.map(e);return this.notifySubscribers("map",[e]),new i(t)}filter(e){const t=this.data.filter(e);return this.notifySubscribers("filter",[e]),new i(t)}reduce(e,t){const n=this.data.reduce(e,t);return this.notifySubscribers("reduce",[e,t]),n}set(e,t){const n=this.data.map((n=>({...n,[e]:t})));return this.notifySubscribers("set",[e,t]),new i(n)}unset(e){const t=this.data.map((t=>{const{[e]:n,...s}=t;return s}));return this.notifySubscribers("unset",[e]),new i(t)}update(e,t){const n=this.data.map((n=>{const s=t(n[e]);return{...n,[e]:s}}));return this.notifySubscribers("update",[e,t]),new i(n)}subscribe(e){this.subscribers.add(e)}notifySubscribers(e,t){const n=JSON.stringify(this.store).length;this.totalSize+=n,this.subscribers.forEach((n=>{n({functionName:e,arguments:t,size:this.formatSize(this.totalSize)})}))}formatSize(e){return e<1024?`${e} bytes`:e<1048576?`${(e/1024).toFixed(2)} KB`:e<1073741824?`${(e/1048576).toFixed(2)} MB`:`${(e/1073741824).toFixed(2)} GB`}}class l{constructor(){this.cache={},this.subscribers=new Set,this.shards=0,this.shardsessions=[]}async query(e){const t=this.getCachedResult(e);if(t)return t;try{const t=await e();return this.cacheResult(e,Array.from(arguments),t),t}catch(e){throw c.enabled&&c.log([`\n        Query failed: ${e.message}`],"error"),e}}subscribe(e){this.subscribers.add(e)}unsubscribe(e){this.subscribers.delete(e)}getCacheSizePerNode(){const e={};return Object.entries(this.cache).forEach((([t,n])=>{let s=0;Object.values(n).forEach((e=>{s+=JSON.stringify(e).length})),e[t]=`${s} bytes`})),e}notifySubscribers(e,t,n){this.subscribers.forEach((s=>{s({functionName:e,arguments:t,result:n})}))}getCachedResult(e){try{const t=this.getCacheKey(e),n=this.cache[t];return n?n.expiry&&Date.now()>n.expiry?(this.evictCache(t),null):n.result:null}catch(e){throw c.enabled&&c.log([`\n        Query failed: ${e.message}`],"error"),e}}cacheResult(e,t,n,s){const o=this.getCacheKey(e,t),r={result:n};if(s&&(r.expiry=Date.now()+s),this.cache[o]=r,this.cacheSizeLimit&&Object.keys(this.cache).length>this.cacheSizeLimit){const e=Object.values(this.cache).reduce(((e,t)=>e.expiry<t.expiry?e:t));this.evictCache(this.getCacheKey(e))}this.notifySubscribers(e,t,n)}getCacheKey(e,t){return e.toString()+JSON.stringify(t)}async queryParallel(e){return await Promise.all(e.map((e=>this.query(e))))}evictCache(e){delete this.cache[e]}async queryWithSharding(e,t){try{const n=Math.ceil(e.length/t),s=[];for(let o=0;o<t;o++){const t=o*n,r=t+n;s.push(e.slice(t,r))}this.shards=s;const o=(await Promise.all(s.map((e=>this.queryParallel(e))))).flat(),r=s.map((e=>({queries:e.map((e=>{const t=this.getCacheKey(e),n=this.cache[t];return{query:e.toString(),result:n?n.result:null}}))})));return c.enabled&&c.log([`\n        Query with sharding: ${r}`],"log"),this.shardsessions=r,o}catch(e){throw console.error(`Error executing query with sharding: ${e}`),e}}saveCache(e){try{e(this.cache)}catch(e){throw console.error(`Error saving cache: ${e.message}`),e}}saveShardSessions(e,t,n=null,s=null){const o=JSON.stringify(this.shardSessions),r=new Blob([o],{type:"application/json"});if("local"==t){const t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e,n.click()}else"server"==t?fetch(n,{method:"POST",body:r}).then((e=>{if(!e.ok)throw new Error("Error saving shard sessions");s&&s()})):"store"==t&&localStorage.setItem(e,o)}async reloadShards(){return(await Promise.all(this.shards.map((e=>this.queryParallel(e))))).flat()}}window.ReactDOM=ReactDOM,window.useState=React.useState,window.useEffect=React.useEffect,window.useContext=React.useContext,window.useReducer=React.useReducer,window.useRef=React.useRef,window.useCallback=React.useCallback,window.lazy=React.lazy,window.forwardRef=React.forwardRef,window.createContext=React.createContext,window.startTransition=React.startTransition,window.useSyncExternalStore=React.useSyncExternalStore,window.useMemo=React.useMemo,window.useLayoutEffect=React.useLayoutEffect,window.useInsertionEffect=React.useInsertionEffect,window.useImperativeHandle=React.useImperativeHandle,window.useId=React.useId,window.useDeferredValue=React.useDeferredValue,window.useTransition=React.useTransition,window.React=React;let c={enabled:document.querySelector("html").hasAttribute("debug"),log:(e,t)=>{c.enabled&&("logs"===t?(e=e[0].replace(/\s+/g," ").trim(),console.log(e)):"warn"===t?console.warn(e):"error"===t?(e=e[0].replace(/\s+/g," ").trim(),console.error(e)):"info"===t?(e=e[0].replace(/\s+/g," ").trim(),console.info(e)):"assert"===t&&(e[0]=e[0].replace(/\s+/g," ").trim(),console.assert(!1,e[0])))},init:()=>{c.enabled&&c.log(["Debug mode enabled"],"log")}};c.init();export const SQLStore={tables:{},run:function(e){const t=e.split(" ");switch(t[0].toLowerCase()){case"create":this.createTable(t[2],JSON.parse(t[4]));break;case"insert":this.insertRow(t[2],JSON.parse(t[4]));break;case"remove":this.removeRow(t[2],JSON.parse(t[4]));break;case"drop":this.removeTable(t[2]);break;case"select":return this.selectRows(t[3],JSON.parse(t[5]))}},driver:function(e){e&&"object"==typeof e?this.store=e:console.assert(!1,`SQLStore -> ${Date.now()}: Invalid store object.`)},Table:function(e){return this.tables[e]||(this.tables[e]={name:e,schema:{},hooks:[]}),this.tables[e]},hook:function(e,t){this.Table(e).hooks.push(t)},createTable:function(e,t){const n=`${e}_table`;this.store.getItem(n)?console.assert(!1,`SQLStore -> ${Date.now()} : Table '${e}' already exists.`):(this.store.setItem(n,JSON.stringify(t)),console.log(`SQLStore: Table '${e}' created with schema:`,t),this.triggerHooks(e,"tableCreated",{schema:t}))},insertRow:function(e,t){const n=`${e}_table`,s=JSON.parse(this.store.getItem(n));if(s){const n={},o=[];for(let e in s){const r=s[e];if(t.hasOwnProperty(e)){const s=t[e];typeof s===r.toLowerCase()?n[e]=s:o.push(`Invalid value type for column '${e}'. Expected '${r}'.`)}else o.push(`Missing value for column '${e}'.`)}if(0===o.length){const t=`${e}_data`,s=JSON.parse(this.store.getItem(t))||[];s.push(n),this.store.setItem(t,JSON.stringify(s)),console.log(`SQLStore -> ${Date.now()}: Row inserted successfully into '${e}'.`),this.triggerHooks(e,"rowInserted",{row:n})}else console.error(`Failed to insert row into '${e}':`,o)}else console.assert(!1,`SQLStore -> ${Date.now()}: Table '${e}' does not exist.`)},removeRow:function(e,t){const n=`${e}_table`;if(JSON.parse(this.store.getItem(n))){const n=`${e}_data`;let s=JSON.parse(this.store.getItem(n))||[];const o=s.filter((e=>{for(let n in t)if(e[n]!==t[n])return!0;return!1}));o.length!==s.length?(this.store.setItem(n,JSON.stringify(o)),console.log(`SQLStore -> ${Date.now()}: Removed row(s) from '${e}'.`),this.triggerHooks(e,"rowRemoved",{conditions:t})):console.assert(!1,`SQLStore -> ${Date.now()}: No matching rows found in '${e}'.`)}else console.assert(!1,`SQLStore -> ${Date.now()}: Table '${e}' does not exist.`)},removeTable:function(e){const t=`${e}_table`;this.store.getItem(t)?(this.store.removeItem(t),this.store.removeItem(`${e}_data`),delete this.tables[e],console.log(`SQLStore -> ${Date.now()}: Table '${e}' and associated data removed.`),this.triggerHooks(e,"tableRemoved",{})):console.assert(!1,`SQLStore -> ${Date.now()}: Table '${e}' does not exist.`)},selectRows:function(e,t){const n=`${e}_table`;if(JSON.parse(this.store.getItem(n))){const n=`${e}_data`,s=(JSON.parse(this.store.getItem(n))||[]).filter((e=>{for(let n in t)if(e[n]!==t[n])return!1;return!0}));console.log(`SQLStore -> ${Date.now()}: Selected ${s.length} rows from '${e}'.`),this.triggerHooks(e,"rowsSelected",{rows:s})}else console.assert(!1,`SQLStore -> ${Date.now()}: Table '${e}' does not exist.`)},viewSchema:function(e){const t=`${e}_table`,n=JSON.parse(this.store.getItem(t));return n?console.log(`SQLStore -> ${Date.now()}: Schema of table '${e}':`,n):console.assert(!1,`SQLStore -> ${Date.now()}: Table '${e}' does not exist.`),n},updateRows:function(e,t,n){const s=`${e}_table`,o=JSON.parse(this.store.getItem(s));if(o){const s=`${e}_data`;let r=JSON.parse(this.store.getItem(s))||[],a=0;r=r.map((s=>{let r=!0;for(let e in t)if(s[e]!==t[e]){r=!1;break}if(r){for(let t in n)if(o.hasOwnProperty(t)){const e=o[t],r=n[t];typeof r===e.toLowerCase()?s[t]=r:console.assert(!1,`SQLStore -> ${Date.now()}: Invalid value type for column '${t}'. Expected '${e}'.`)}else console.assert(!1,`SQLStore -> ${Date.now()}: Column '${t}' does not exist in table '${e}'.`);a++}return s})),a>0?(this.store.setItem(s,JSON.stringify(r)),console.log(`SQLStore -> ${Date.now()}: Updated ${a} row(s) in '${e}'.`),this.triggerHooks(e,"rowsUpdated",{conditions:t,newData:n})):console.assert(!1,`SQLStore -> ${Date.now()}: No matching rows found in '${e}'.`)}else console.assert(!1,`SQLStore -> ${Date.now()}: Table '${e}' does not exist.`)},triggerHooks:function(e,t,n){this.Table(e).hooks.forEach((e=>e(t,n)))}};window.addEventListener("message",(function(e){if((e.origin||e.originalEvent.origin)!==window.location.origin)return;const{eventType:t,data:n}=e.data;if(t&&n){const{tableName:e}=n;e&&SQLStore.triggerHooks(e,t,n)}})),window.SQLStore=SQLStore;export const fs={read:(e,t=!1)=>new Promise(((n,s)=>{if(t)import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((t=>{const o=localStorage.getItem(e);if(o){const t=new Uint8Array(JSON.parse(o)),s=pako.inflate(t),r=(new TextDecoder).decode(s);c.enabled&&c.log([`\n              Read file: ${e}`],"log"),n(r)}else c.enabled&&c.log([`\n              File not found: ${e}`],"assert"),s()}));else{const t=localStorage.getItem(e);t?(c.enabled&&c.log([`\n            Read file: ${e}`],"log"),n(t)):(c.enabled&&c.log([`\n            File not found: ${e}`],"assert"),s())}})),write:(e,t,n=!1)=>new Promise(((s,o)=>{const r=e.substring(0,e.lastIndexOf("/"));if(!fs.exists(r))return c.enabled&&c.log([`\n          FileSystem: Directory does not exist: ${r}`],"assert"),void o();n?import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{const o=(new TextEncoder).encode(t),r=pako.gzip(o),a=JSON.stringify(Array.from(r));localStorage.setItem(e,a),localStorage.setItem(`__fs_watch_${e}`,Date.now()),c.enabled&&c.log([`\n            Write file: ${e}`],"log"),s()})):(localStorage.setItem(e,t),localStorage.setItem(`__fs_watch_${e}`,Date.now()),c.enabled&&c.log([`\n         FileSystem:  Write file: ${e}`],"log"),s())})),exists:e=>null!==localStorage.getItem(e),mkdir:e=>{if(fs.exists(e))return void(c.enabled&&c.log([`\n        FileSystem: Directory  already exists: ${e}`],"assert"));const t=e.split("/").filter((e=>""!==e));let n="/root";t.forEach((e=>{n+=`/${e}`,fs.exists(n)||(localStorage.setItem(n,"{}"),c.enabled&&c.log([`\n          FileSystem: Created directory: ${n}`],"log"))}))},watch:(e,t)=>{let n=localStorage.getItem(`__fs_watch_${e}`);setInterval((()=>{const s=localStorage.getItem(`__fs_watch_${e}`);s!==n&&(n=s,t({event:"change",path:e}))}),1e3)},rmrf:e=>{const t=e.substring(0,e.lastIndexOf("/"));if(!fs.exists(t))return void(c.enabled&&c.log([`\n        FileSystem: Directory does not exist: ${t}`],"assert"));const n=e.split("/").filter((e=>""!==e));let s="/root";n.forEach((e=>{s+=`/${e}`,fs.exists(s)&&(localStorage.removeItem(s),c.enabled&&c.log([`\n          FileSystem: Removed directory: ${s}`],"log"))}))},ls:e=>{const t=e.substring(0,e.lastIndexOf("/"));if(!fs.exists(t))return void(c.enabled&&c.log([`\n        FileSystem: Directory does not exist: ${t}`],"assert"));const n=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s.startsWith(e)&&n.push(s)}return n},cp:(e,t)=>{if(!fs.exists(e))return void(c.enabled&&c.log([`\n        File does not exist: ${e}`],"assert"));const n=localStorage.getItem(e);localStorage.setItem(t,n),c.enabled&&c.log([`\n      Copied file: ${e} -> ${t}`],"log")},mv:(e,t)=>{if(!fs.exists(e))return void(c.enabled&&c.log([`\n        File does not exist: ${e}`],"assert"));const n=localStorage.getItem(e);localStorage.setItem(t,n),localStorage.removeItem(e),c.enabled&&c.log([`\n      Moved file: ${e} -> ${t}`],"log")},cat:e=>{if(fs.exists(e))return localStorage.getItem(e);c.enabled&&c.log([`\n        File does not exist: ${e}`],"assert")},pwd:()=>"/root",cd:e=>{fs.exists(e)?localStorage.setItem("current_directory",e):c.enabled&&c.log([`\n        FileSystem: Directory does not exist: ${directoryPath}`],"assert")},clear:()=>{localStorage.clear()},size:e=>{if(!fs.exists(e))return void(c.enabled&&c.log([`\n        File does not exist: ${e}`],"assert"));let t=localStorage.getItem(e).length,n=0;for(;t>1024;)t/=1024,n++;return`${t.toFixed(2)} ${["B","KB","MB","GB","TB"][n]}`},rename:(e,t)=>{if(!fs.exists(e))return void(c.enabled&&c.log([`\n        File does not exist: ${e}`],"assert"));const n=localStorage.getItem(e);localStorage.setItem(t,n),localStorage.removeItem(e),c.enabled&&c.log([`\n      Renamed file: ${e} -> ${t}`],"log")},help:()=>"Available commands: ls, pwd, cd, cat, mkdir, rmrf, cp, mv, clear, help, watch, write, read, rename, exists"};export class graphStore{constructor(e){this.tableName=e}createTable(){document.cookie=`${this.tableName}=; path=/`}insertRow(e,t){const n=this.getTableData();n[e]=t,this.updateTableData(n)}getRow(e){return this.getTableData()[e]}getAllRows(){return this.getTableData()}deleteRow(e){const t=this.getTableData();delete t[e],this.updateTableData(t)}deleteTable(){document.cookie=`${this.tableName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}getTableData(){const e=document.cookie.split("; ").find((e=>e.startsWith(`${this.tableName}=`))).split("=")[1];return e?JSON.parse(e):{}}updateTableData(e){document.cookie=`${this.tableName}=${JSON.stringify(e)}; path=/`}}window.graphStore=graphStore,window.fs=fs;export const os={cpus:()=>navigator.hardwareConcurrency+" Cores",hostname:()=>window.location.hostname,platform:()=>{let e=navigator.s;switch(e){case e.includes("Win"):return"Windows";case e.includes("Mac"):return"MacOS";case e.includes("Linux"):return"Linux";case e.includes("Android"):return"Android";case e.includes("iOS"):return"iOS";default:return"Unknown"}},hardware:async()=>{const e=await navigator.gpu.requestAdapter();let t=navigator.deviceMemory,n=0;for(;t>1024;)t/=1024,n++;return t=`${t.toFixed(2)} ${["B","KB","MB","GB","TB"][n]}`,{gpu:await e.requestDevice(),cpu:navigator.hardwareConcurrency+" Cores",ram:t}},arch:()=>{let e=navigator.userAgent;return"Win64"===e||"x86_64"===e||"x64"===e?"x64":"Win32"===e||"x86"===e?"x32":"Unknown"}};export const notifier={subscribers:[],send:async(e,t)=>{if("Notification"in window)try{if("granted"===await Notification.requestPermission()){const n=new Notification(e,t);Object.values(notifier.subscribers).forEach((e=>{e.forEach((e=>{e(n)}))}))}else c.enabled&&c.log(["\n          Notification permission denied."],"assert")}catch(e){c.enabled&&c.log([`\n        Failed to request notification permission:${e}`],"assert")}else c.enabled&&console.error("[VISI NOTIFIER] This browser does not support desktop notification")},sendPostNotification:async(e,t,n)=>{try{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to send POST notification.");const o=(await s.json()).message;notifier.send(o,n)}catch(e){c.enabled&&c.log([`\n        Failed to send POST notification: ${e}`],"assert")}},subscribe:(e,t)=>{notifier.subscribers[e]||(notifier.subscribers[e]=new Set),notifier.subscribers[e].add(t)},unsubscribe:(e,t)=>{notifier.subscribers[e]&&(notifier.subscribers[e].delete(t),0===notifier.subscribers[e].size&&delete notifier.subscribers[e])},handleNotificationClick:(e,t)=>{"function"==typeof t&&(e.notification.close(),t(e))},handleNotificationClose:(e,t)=>{"function"==typeof t&&t(e)}};window.notifier=notifier,window.os=os;const d={};export let contained={newContainer:e=>{if(d[e])return void console.error(`Container with ID '${e}' already exists.`);const t=new Worker(URL.createObjectURL(new Blob([`\n    // Worker code\n    self.onmessage = (event) => {\n      const { event: eventType, id, code, callbackId } = event.data;\n      const container = ${JSON.stringify(d[e])};\n      \n      if (eventType === 'run') {\n        try {\n          // Execute the code within the container\n          const result = eval(code);\n          self.postMessage(JSON.stringify({ result, callbackId }));\n        } catch (error) {\n          self.postMessage(JSON.stringify({ error: error.message, callbackId }));\n        }\n      } else if (eventType === 'postMessage') {\n        // Handle custom messages sent from the main thread\n        container.onMessage(event.data.message);\n      } else if (eventType === 'exit') {\n        // Clean up the container\n         ${JSON.stringify(d[e])} = null;\n         console.log("Container with ID '${e}' exited.");\n        self.close();\n        delete containers[id];\n      }\n    };\n  `]))),n={id:e,worker:t,onMessage:()=>{},onDestroy:()=>{}};t.onmessage=s=>{const{result:o,error:r,callbackId:a}=JSON.parse(s.data);if(r){t.postMessage({event:"exit",id:e});const s=n.callbacks[a];s&&(delete n.callbacks[a],s(r))}else{const e=n.callbacks[a];e&&(delete n.callbacks[a],e(null,o))}},n.callbacks={},d[e]=n},run:(e,t,n)=>{const s=d[e];if(!s)return void c.log([`\n      Container with ID '${e}' does not exist.`],"assert");const o=Math.random().toString(36).substring(7);s.callbacks[o]=n,s.worker.postMessage({event:"run",id:e,code:t,callbackId:o})},postMessage:(e,t)=>{const n=d[e];n?n.worker.postMessage({event:"postMessage",id:e,message:t}):c.enabled&&c.log([`\n        Container with ID '${e}' does not exist.`],"assert")},exit:e=>{const t=d[e];t?t.worker.postMessage({event:"exit",id:e}):c.enabled&&c.log([`\n        Container with ID '${e}' does not exist.`],"assert")},onMessage:(e,t)=>{const n=d[e];n?n.onMessage=t:c.enabled&&c.log([`\n        Container with ID '${e}' does not exist.`],"assert")},onDestroy:(e,t)=>{d[e]||c.enabled&&c.log([`\n        Container with ID '${e}' does not exist.`],"assert")}};window.contained=contained;const h={modules:localStorage.getItem("lib_modules")||"{}",listModules:()=>{let e=JSON.parse(localStorage.getItem("lib_modules")||"{}");console.log(Object.keys(e))},clearAll:()=>{localStorage.removeItem("lib_modules")},clearModule:e=>{let t=JSON.parse(localStorage.getItem("lib_modules")||"{}");delete t[e],localStorage.setItem("lib_modules",JSON.stringify(t))}};window.libManager=h,window.lib=e;export default{Lazy:i,JsonHandler:l,lib:e,libManager:h};window.Lazy=i,window.JsonHandler=l;export class ReactRouter{constructor(){this.routes={},this.currentUrl="",this.store={},this.rootElement=null,this.hashChangeListener=null,this.listeners={},this.storedroutes=[],this.errorcheck=null,this.headers={},this.customerror=null,this.hooked=!1}get(e,t){const n=[],s=[],o=e.split("/").map((e=>e.startsWith(":")?(n.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(n.push(e.substring(1)),"(.*)"):e.startsWith("?")?(s.push(e.substring(1)),"([^/]+)"):e)).join("/"),r=new RegExp("^"+o+"(\\?(.*))?$");if(window.location.hash.substring(1).match(r)){this.storedroutes.push(window.location.hash.substring(1)),this.hooked=!0,this.routes[e]=!0;const s=window.location.hash.substring(1).match(r),o={};for(let e=0;e<n.length;e++)o[n[e]]=s[e+1];if(e.includes(":")&&window.location.hash.substring(1).split("?")[1])return c.enabled&&c.log([`\n            Cannot use query params with path params ${e} ${window.location.hash.substring(1).split("?")[1]}`],"assert"),!1;const a={},i=window.location.hash.substring(1).split("?")[1];if(i){const e=i.split("&");for(let t=0;t<e.length;t++){const n=e[t].split("=");a[n[0]]=n[1]}}const l={params:o,query:a,url:window.location.hash.substring(1),method:"GET"};let d=!1;return t(l,{json:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{const t=`<pre>${JSON.stringify(e)}</pre>`;document.getElementById(this.rootElement).innerHTML=t,d=!0}catch(e){throw new Error("Invalid JSON data")}},setMeta:(e,t)=>{const n=document.createElement("meta");n.name=e,n.content=t,document.head.appendChild(n)},setCookie:(e,t,n)=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let s=`${e}=${t};`;n&&(n.path&&(s+=`path=${n.path};`),n.domain&&(s+=`domain=${n.domain};`),n.maxAge&&(s+=`max-age=${n.maxAge};`),n.httpOnly&&(s+=`httpOnly=${n.httpOnly};`),n.secure&&(s+=`secure=${n.secure};`),n.sameSite&&(s+=`sameSite=${n.sameSite};`)),document.cookie=s},getCookie:e=>{const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const s=t[n].trim(),o=s.split("=")[0];if(o===e){const e=s.split("=")[1];s.split(";").slice(1).map((e=>{const[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{});return{name:o,value:e}}}return null},title:e=>{d&&c.enabled&&c.log(["\n                Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),document.title=e,d=!0},saveState:()=>{d&&c.enabled&&c.log(["\n                State has already been saved cannot save again"],"assert");const e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},restoreState:()=>{d&&c.enabled&&c.log(["\n                State has already been restored cannot restore again"],"assert");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.location.hash=this.currentUrl,d=!0},send:e=>{d&&c.enabled&&c.log(["\n                Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{d&&c.enabled&&c.log(["\n                Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),window.React._render(e)(this.rootElement),d=!0},compress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{c.enabled&&c.log(["\n                Pako loaded"],"log");const s=(new TextEncoder).encode(e),o=pako.gzip(s);t(o)}))})),decompress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{const s=new Uint8Array(e),o=pako.inflate(s),r=(new TextDecoder).decode(o);t(r)}))})),ip:()=>(d&&c.enabled&&c.log(["\n                Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),d=!0,fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>e.ip))),return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,c.enabled&&c.log(["\n               ReactRouter: last listener removed"],"log"))},sendStatus:(e,t)=>{d&&c.enabled&&c.log(["\n                Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),"number"==typeof t?(document.getElementById(this.rootElement).innerHTML=JSON.stringify({msg:e,code:t}),d=!0):c.enabled&&c.log(["\n                Invalid status code"],"assert")},redirect:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},compress:async e=>{const t=(new TextEncoder).encode(e);return pako.gzip(t)},decompress:async e=>{const t=new Uint8Array(e),n=pako.inflate(t);return(new TextDecoder).decode(n)},markdown:(e,t=null)=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");"path"==t?fetch(e).then((e=>e.text())).then((e=>{document.getElementById(this.rootElement).innerHTML=marked.parse(e)})):document.getElementById(this.rootElement).innerHTML=marked.parse(e)},sendFile:e=>{let t=this.rootElement;if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){if(e.endsWith(".png"))document.getElementById(t).style="\n              position: fixed;\n             top: 0;\n            left: 0;\n           width: 100%;\n         height: 100%;\n        background-color: black;\n              \n              ",document.getElementById(t).innerHTML=` \n      <img src="${e}" style="resize: none; border: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"/>`;else if(e.endsWith(".json"))fetch(e).then((e=>e.json())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${JSON.stringify(e)}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".js"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".css"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".html"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".img")||e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".gif")||e.endsWith(".svg")||e.endsWith(".ico"))document.getElementById(t).innerHTML=`\n                        <img src="${e}" \n                        \n                        style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                         \n                        />\n                        `;else if(e.endsWith(".pdf"))document.getElementById(t).innerHTML=`\n                        <embed src="${e}" \n                        \n                        style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                         \n                        />\n                        `;else if(e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg")){let n=document.createElement("video");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}else{let n=document.createElement("audio");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}},n.send()}}),!0}return this.hooked=!1,!1}error(e){let t=!1;this.errorcheck=!0;window.onhashchange=()=>{if(!this.storedroutes.includes(window.location.hash.substring(1))){const n={sendStatus:(e,n)=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");if("number"!=typeof n)throw new Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=JSON.stringify({msg:e,code:n}),t=!0},send:e=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");document.getElementById(this.rootElement).innerHTML=e,t=!0},jsx:e=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");window.React._render(e)(this.rootElement),t=!0},sendFile:e=>{if(this.customerror=tru,t)throw new Error("Cannot send file after headers have already been sent");if(!e.endsWith(".html"))throw new Error("Cannot send file that is not HTML");fetch(e).then((e=>e.text())).then((e=>{document.getElementById(this.rootElement).innerHTML=e})),t=!0},return:()=>{t&&(t=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))}};if(null===this.customerror){const e=React.createElement("code",null,`Cannot GET ${window.location.hash.substring(1)}`);React._render(e)(this.rootElement)}else e(n)}};const n={sendStatus:(e,n)=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");if("number"!=typeof n)throw new Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=JSON.stringify({msg:e,code:n}),t=!0},send:e=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");document.getElementById(this.rootElement).innerHTML=e,t=!0},jsx:e=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");window.React._render(e)(this.rootElement),t=!0},sendFile:e=>{if(this.customerror=!0,t)throw new Error("Cannot send file after headers have already been sent");if(!e.endsWith(".html"))throw new Error("Cannot send file that is not HTML");fetch(e).then((e=>e.text())).then((e=>{document.getElementById(this.rootElement).innerHTML=e})),t=!0},return:()=>{t&&(t=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))}};this.storedroutes.includes(window.location.hash.substring(1))||(this.customerror?e(n):document.getElementById(this.rootElement).innerHTML=`<code>Cannot GET ${window.location.hash.substring(1)}</code>`)}root(e,t){const n=[],s=[],o=window.location.hash.substring(1);this.hooked||this.storedroutes.includes(o)||(this.storedroutes.push(o),window.location.hash=o);const r=e.split("/").map((e=>e.startsWith(":")?(n.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(n.push(e.substring(1)),"(.*)"):e.startsWith("?")?(s.push(e.substring(1)),"([^/]+)"):e)).join("/"),a=new RegExp("^"+r+"(\\?(.*))?$");if(""===o)if(0===n.length)window.location.hash=e;else{const t=e.split("/").map((e=>e.startsWith(":")?"":e)).join("/");window.location.hash=t}else{const t=o.match(a);if(t){const s={};n.forEach(((e,n)=>{s[e]=t[n+1]}));const o=e.split("/").map((e=>e.startsWith(":")?s[e.substring(1)]:e)).join("/");window.location.hash=o}}if(this.routes[e]=!0,this.currentUrl=e,window.location.hash.substring(1).match(a)){const s=window.location.hash.substring(1).match(a),o={};for(let e=0;e<n.length;e++)o[n[e]]=s[e+1];if(e.includes(":")&&window.location.hash.substring(1).split("?")[1])return c.enabled&&console.error(`\n           [ReactRouter]: Cannot use query params with path params ${e} ${window.location.hash.substring(1).split("?")[1]}\n          `),!1;const r={},i=window.location.hash.substring(1).split("?")[1];if(i){const e=i.split("&");for(let t=0;t<e.length;t++){const n=e[t].split("=");r[n[0]]=n[1]}}const l={params:o,query:r,url:window.location.hash.substring(1),method:"ROOT_GET"};let d=!1;const h={json:e=>{d&&c.enabled&&console.error("\n                [ReactRouter]: Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client\n              ");try{const t=`<pre>${JSON.stringify(e)}</pre>`;document.getElementById(this.rootElement).innerHTML=t,d=!0}catch(e){c.enabled&&console.error("\n                  [ReactRouter]: Invalid JSON data\n                ")}},setMeta:(e,t)=>{const n=document.createElement("meta");n.name=e,n.content=t,document.head.appendChild(n)},setCookie:(e,t,n)=>{d&&c.enabled&&console.error("\n                  [ReactRouter]: Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client\n                ");let s=`${e}=${t};`;n&&(n.path&&(s+=`path=${n.path};`),n.domain&&(s+=`domain=${n.domain};`),n.maxAge&&(s+=`max-age=${n.maxAge};`),n.httpOnly&&(s+=`httpOnly=${n.httpOnly};`),n.secure&&(s+=`secure=${n.secure};`),n.sameSite&&(s+=`sameSite=${n.sameSite};`)),document.cookie=s},getCookie:e=>{const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const s=t[n].trim(),o=s.split("=")[0];if(o===e){const e=s.split("=")[1];s.split(";").slice(1).map((e=>{const[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{});return{name:o,value:e}}}return null},title:e=>{d&&c.enabled&&console.error("\n                  [ReactRouter]: Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client\n                "),document.title=e,d=!0},saveState:()=>{d&&c.enabled&&c.log(["\n                ReactRouter: State has already been saved cannot save again"],"assert");const e=window.location.hash.substring(1);console.log(e),window.sessionStorage.getItem(e)?(window.location.hash=window.sessionStorage.getItem(e),console.log(window.sessionStorage.getItem(e))):(window.sessionStorage.setItem(e,e),console.log(window.sessionStorage.getItem(e))),d=!0},ip:()=>(d&&c.enabled&&c.log(["\n                ReactRouter: Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),d=!0,fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>e.ip))),restoreState:()=>{if(d)throw new Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?(window.location.hash=window.sessionStorage.getItem(e),c.enabled&&c.log(["\n                ReactRouter: Restored state"],"assert")):(window.location.hash=this.currentUrl,c.enabled&&c.log(["\n                ReactRouter: no state was found"],"assert")),d=!0},send:e=>{d&&c.enabled&&c.log(["\n                ReactRouter: Invalid JSON data"],"assert"),document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{d&&c.enabled&&c.log(["\n                ReactRouter: Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client"],"assert"),window.React._render(e)(this.rootElement),d=!0},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,c.enabled&&c.log(["\n                ReactRouter: removed last event listener"],"assert"))},sendStatus:(e,t)=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw new Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=JSON.stringify({msg:e,code:t}),d=!0},markdown:(e,t=null)=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");import("https://cdn.jsdelivr.net/npm/marked/marked.min.js").then((n=>{"path"==t?fetch(e).then((e=>e.text())).then((e=>{document.getElementById(this.rootElement).innerHTML=marked.parse(e)})):document.getElementById(this.rootElement).innerHTML=marked.parse(e)}))},redirect:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},compress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{console.log("pako loaded");const s=(new TextEncoder).encode(e),o=pako.gzip(s);t(o)}))})),decompress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{const s=new Uint8Array(e),o=pako.inflate(s),r=(new TextDecoder).decode(o);t(r)}))})),sendFile:e=>{let t=this.rootElement;if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){if(e.endsWith(".png"))document.getElementById(t).style="\n                      position: fixed;\n                     top: 0;\n                    left: 0;\n                   width: 100%;\n                 height: 100%;\n                background-color: black;\n                      \n                      ",document.getElementById(t).innerHTML=` \n              <img src="${e}" style="resize: none; border: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"/>`;else if(e.endsWith(".json"))fetch(e).then((e=>e.json())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${JSON.stringify(e)}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".js"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".css"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".html"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".img")||e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".gif")||e.endsWith(".svg")||e.endsWith(".ico"))document.getElementById(t).innerHTML=`\n                        <img src="${e}" \n                        \n                        style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                         \n                        />\n                        `;else if(e.endsWith(".pdf"))document.getElementById(t).innerHTML=`\n                        <embed src="${e}" \n                        \n                        style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                         \n                        />\n                        `;else if(e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg")){let n=document.createElement("video");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}else{let n=document.createElement("audio");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}},n.send()}};return this.hashChangeListener||(this.hashChangeListener=()=>{if(window.location.hash.substring(1).match(a)){const e=window.location.hash.substring(1).match(a),s={};for(let t=0;t<n.length;t++)s[n[t]]=e[t+1];const o={params:s,rootUrl:this.currentUrl,url:window.location.hash.substring(1)};t(o,{json:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{const t=`<pre>${JSON.stringify(e)}</pre>`;document.getElementById(this.rootElement).innerHTML=t,d=!0}catch(e){throw new Error("Invalid JSON data")}},title:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,d=!0},saveState:()=>{if(d)throw new Error("State has already been saved cannot save again");const e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),d=!0},compress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{console.log("pako loaded");const s=(new TextEncoder).encode(e),o=pako.gzip(s);t(o)}))})),decompress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{const s=new Uint8Array(e),o=pako.inflate(s),r=(new TextDecoder).decode(o);t(r)}))})),markdown:(e,t=null)=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");import("https://cdn.jsdelivr.net/npm/marked/marked.min.js").then((n=>{"path"==t?fetch(e).then((e=>e.text())).then((e=>{document.getElementById(this.rootElement).innerHTML=marked.parse(e)})):document.getElementById(this.rootElement).innerHTML=marked.parse(e)}))},restoreState:()=>{if(d)throw new Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.location.hash=this.currentUrl,d=!0},send:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,d=!0},jsx:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),d=!0},return:()=>{d&&(d=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw new Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=JSON.stringify({msg:e,code:t}),d=!0},redirect:e=>{if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,d=!0},sendFile:e=>{let t=this.rootElement;if(d)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){if(e.endsWith(".png"))document.getElementById(t).style="\n                    position: fixed;\n                   top: 0;\n                  left: 0;\n                 width: 100%;\n               height: 100%;\n              background-color: black;\n                    \n                    ",document.getElementById(t).innerHTML=` \n            <img src="${e}" style="resize: none; border: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"/>`;else if(e.endsWith(".json"))fetch(e).then((e=>e.json())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${JSON.stringify(e)}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".js"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".css"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".html"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".img")||e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".gif")||e.endsWith(".svg")||e.endsWith(".ico"))document.getElementById(t).innerHTML=`\n                        <img src="${e}" \n                        \n                        style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                         \n                        />\n                        `;else if(e.endsWith(".pdf"))document.getElementById(t).innerHTML=`\n                        <embed src="${e}" \n                        \n                        style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                         \n                        />\n                        `;else if(e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg")){let n=document.createElement("video");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}else{let n=document.createElement("audio");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}let s=document.createElement("a");s.href=window.URL.createObjectURL(n.response),s.download=e,s.click()},n.send(),d=!0}})}},window.addEventListener("hashchange",this.hashChangeListener)),t(l,h),!0}return!1}post(e,t){let n=!1;this.sendContent=null;t({set:(e,t)=>{let n=["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Accept-Datetime","Access-Control-Request-Method","Access-Control-Request-Headers","Authorization","Cache-Control","Connection","Cookie","Content-Length","Content-MD5","Content-Type","Date"];if(!n.includes(e))throw new Error({message:"Invalid header name",name:e,accepted_headers:n});if("string"!=typeof t)throw new Error("Invalid header value");this.headers[e]=t},json:e=>{if("application/json"!=this.headers["Content-Type"])throw new Error("Content-Type header must be set to application/json");if(n)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{const t=JSON.stringify(e);this.sendContent=t,n=!0}catch(e){throw new Error("Invalid JSON data")}},jsonp:e=>{if("application/json"!=this.headers["Content-Type"])throw new Error("Content-Type header must be set to application/json");if(n)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{const t=JSON.stringify(e);this.sendContent=`callback(${t})`,n=!0}catch(e){throw new Error("Invalid JSON data")}},text:e=>{if("text/plain"==this.headers["Content-Type"]){if(n)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{const t=e;this.sendContent=t,n=!0}catch(e){throw new Error("Invalid text data")}}},return:()=>{n&&(n=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))}});const s={path:e,data:this.sendContent,headers:this.headers};window.postMessage(s,"*")}listen(e,t){if(this.listeners[e])throw new Error(`Listener already registered for route ${e}`);const n=n=>{const s=n.data.path,o=n.data.data,r=n.data.headers;s===e&&t({data:o,headers:r,method:"POST"})};window.addEventListener("message",n),this.listeners[e]=n}stopListening(e){const t=this.listeners[e];t&&(window.removeEventListener("message",t),delete this.listeners[e])}use(e){const t=[],n=[],s=e.split("/").map((e=>e.startsWith(":")?(t.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(t.push(e.substring(1)),"(.*)"):e.startsWith("?")?(n.push(e.substring(1)),"([^/]+)"):e)).join("/");new RegExp("^"+s+"(\\?(.*))?$");e=s,this.routes[e]=!0,this.storedroutes.push(e)}bindRoot(e){this.rootElement=e}onload(e){window.onload=()=>{window.addEventListener("DOMContentLoaded",e())}}on(e,t){window.addEventListener("hashchange",(()=>{const n=[],s=[],o=e.split("/").map((e=>e.startsWith(":")?(n.push(e.substring(1)),"([^/]+)"):e.startsWith("*")?(n.push(e.substring(1)),"(.*)"):e.startsWith("?")?(s.push(e.substring(1)),"([^/]+)"):e)).join("/"),r=new RegExp("^"+o+"(\\?(.*))?$");if(this.routes[e]=!0,this.currentUrl=e,window.location.hash.substring(1).match(r)){this.storedroutes.push(window.location.hash.substring(1)),this.routes[e]=!0;const s=window.location.hash.substring(1).match(r),o={};for(let e=0;e<n.length;e++)o[n[e]]=s[e+1];if(e.includes(":")&&window.location.hash.substring(1).split("?")[1])return console.error("Cannot use query params with path params",e,window.location.hash.substring(1).split("?")[1]),!1;const a={},i=window.location.hash.substring(1).split("?")[1];if(i){const e=i.split("&");for(let t=0;t<e.length;t++){const n=e[t].split("=");a[n[0]]=n[1]}}const l={params:o,query:a,url:window.location.hash.substring(1),method:"POST"};let c=!1;t(l,{json:e=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");try{const t=`<pre>${JSON.stringify(e)}</pre>`;document.getElementById(this.rootElement).innerHTML=t,c=!0}catch(e){throw new Error("Invalid JSON data")}},title:e=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.title=e,c=!0},setCookie:(e,t,n)=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let s=`${e}=${t};`;n&&(n.path&&(s+=`path=${n.path};`),n.domain&&(s+=`domain=${n.domain};`),n.maxAge&&(s+=`max-age=${n.maxAge};`),n.httpOnly&&(s+=`httpOnly=${n.httpOnly};`),n.secure&&(s+=`secure=${n.secure};`),n.sameSite&&(s+=`sameSite=${n.sameSite};`)),document.cookie=s},getCookie:e=>{const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const s=t[n].trim(),o=s.split("=")[0];if(o===e){const e=s.split("=")[1];s.split(";").slice(1).map((e=>{const[t,n]=e.split("=").map((e=>e.trim()));return{[t]:n}})).reduce(((e,t)=>Object.assign(e,t)),{});return{name:o,value:e}}}return null},saveState:()=>{if(c)throw new Error("State has already been saved cannot save again");const e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.sessionStorage.setItem(e,e),c=!0},restoreState:()=>{if(c)throw new Error("State has already been restored cannot restore again");let e=window.location.hash.substring(1);window.sessionStorage.getItem(e)?window.location.hash=window.sessionStorage.getItem(e):window.location.hash=this.currentUrl,c=!0},send:e=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");document.getElementById(this.rootElement).innerHTML=e,c=!0},jsx:e=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.React._render(e)(this.rootElement),c=!0},return:()=>{c&&(c=!1),this.hashChangeListener&&(window.removeEventListener("hashchange",this.hashChangeListener),this.hashChangeListener=null,console.log("removed last event listener"))},sendStatus:(e,t)=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");if("number"!=typeof t)throw new Error("Invalid status code");document.getElementById(this.rootElement).innerHTML=JSON.stringify({msg:e,code:t}),c=!0},ip:()=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");return c=!0,fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>e.ip))},redirect:e=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");window.location.hash=e,c=!0},compress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{console.log("pako loaded");const s=(new TextEncoder).encode(e),o=pako.gzip(s);t(o)}))})),decompress:async e=>new Promise(((t,n)=>{import("https://unpkg.com/pako@2.1.0/dist/pako.min.js").then((n=>{const s=new Uint8Array(e),o=pako.inflate(s),r=(new TextDecoder).decode(o);t(r)}))})),markdown:(e,t=null)=>{if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");import("https://cdn.jsdelivr.net/npm/marked/marked.min.js").then((n=>{"path"==t?fetch(e).then((e=>e.text())).then((e=>{document.getElementById(this.rootElement).innerHTML=marked.parse(e)})):document.getElementById(this.rootElement).innerHTML=marked.parse(e)}))},sendFile:e=>{let t=this.rootElement;if(c)throw new Error("Cannot send headers after they where already sent please refrain from using double res functions and call res.return() to resend to client");let n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){if(e.endsWith(".png"))document.getElementById(t).style="\n                position: fixed;\n               top: 0;\n              left: 0;\n             width: 100%;\n           height: 100%;\n          background-color: black;\n                \n                ",document.getElementById(t).innerHTML=` \n        <img src="${e}" style="resize: none; border: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"/>`;else if(e.endsWith(".json"))fetch(e).then((e=>e.json())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${JSON.stringify(e)}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".js"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".css"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".html"))fetch(e).then((e=>e.text())).then((e=>{const n=`<textarea style="width:100%;height:100%; resize:none; border:none;">${e}</textarea>`;document.getElementById(t).innerHTML=n}));else if(e.endsWith(".img")||e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".gif")||e.endsWith(".svg")||e.endsWith(".ico"))document.getElementById(t).innerHTML=`\n                    <img src="${e}" \n                    \n                    style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                     \n                    />\n                    `;else if(e.endsWith(".pdf"))document.getElementById(t).innerHTML=`\n                    <embed src="${e}" \n                    \n                    style="width:100%;height:100%; resize:none; border:none; position:absolute; top:0; left:0;"\n                     \n                    />\n                    `;else if(e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg")){let n=document.createElement("video");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}else{let n=document.createElement("audio");n.src=e,n.controls=!0,document.getElementById(t).appendChild(n)}let s=document.createElement("a");s.href=window.URL.createObjectURL(n.response),s.download=e,s.click()},n.send()}})}}))}}class u{constructor(){this.middlewareFunctions=[]}use(e){this.middlewareFunctions.push(e)}execute(e,t,n){let s=0;const o=()=>{if(s<this.middlewareFunctions.length){const n=this.middlewareFunctions[s];s++,n(e,t,o)}else n()};o()}}export class ReactRouter_v2{constructor(){this.routes=[],this.currentRoute=null,this.eventListeners={},this.init(),this.rootElement="",this.middleware=new u}init(e){this.rootElement=document.querySelector(e),window.addEventListener("popstate",(()=>{this.handleRouteChange()}))}use(e,t){let n=this.rootElement,s=!1;const o={send:e=>{if(s)throw new Error("Cannot send headers after they have already been sent. Use res.end() to send the next response.");n.innerHTML=e,s=!0},end:()=>{s&&(s=!1),window.history.replaceState(null,null,window.location.pathname)},redirect:(e,t)=>{if(s)throw new Error("Cannot send headers after they have already been sent. Use res.end() to send the next response.");window.history.pushState(null,null,this.buildPathWithQueryParams(e,t)),this.handleRouteChange(),s=!0},json:e=>{if(s)throw new Error("Cannot send headers after they have already been sent. Use res.end() to send the next response.");const t=JSON.stringify(e);n.innerHTML=`<pre>${t}</pre>`,s=!0},sendStatus:(e,t)=>{if(s)throw new Error("Cannot send headers after they have already been sent. Use res.end() to send the next response.");if("number"!=typeof t)throw new Error("Invalid status code");n.innerHTML=JSON.stringify({msg:e,code:t}),s=!0},render:e=>{if(s)throw new Error("Cannot send headers after they have already been sent. Use res.end() to send the next response.");window.React._render(e)(n),s=!0}},r={path:e,callback:t,paramNames:[],queryNames:[]};e.split("/").forEach((e=>{if(e.startsWith(":")){const t=e.slice(1);r.paramNames.push(t)}else if(e.startsWith("?")){const t=e.substring(1).split("&");r.queryNames.push(t)}else r.queryNames.push(null)}));t({params:r.paramNames.reduce(((e,t)=>(e[t]=null,e)),{}),query:{},url:window.location.pathname,method:"GET"},o),this.routes.push(r)}navigateTo(e,t){window.history.pushState(null,null,this.buildPathWithQueryParams(e,t)),this.handleRouteChange()}handleRouteChange(){const e=window.location.pathname,t=this.matchRoute(e);if(t){const{path:n,middleware:s,callback:o,paramNames:r,queryNames:a}=t,i=window.location.search.substring(1),l={};i&&i.split("&").forEach((e=>{const[t,n]=e.split("=");l[t]=decodeURIComponent(n)}));const c=this.extractParams(n,e,r);this.currentRoute=n;const d={params:c,query:l,url:window.location.pathname,method:"GET"};this.middleware.execute(d,{},(()=>{o(d,{})})),this.triggerEvent("routeChange",n,c)}else console.log("404: Route not found")}on(e,t){this.eventListeners[e]||(this.eventListeners[e]=new Set),this.eventListeners[e].add(t)}off(e,t){this.eventListeners[e]&&this.eventListeners[e].delete(t)}triggerEvent(e,t,n){this.eventListeners[e]&&this.eventListeners[e].forEach((e=>{e(t,n)}))}matchRoute(e){for(const t of this.routes){const{path:n}=t;if(this.buildRegex(n).test(e))return t}return null}buildRegex(e){const t=[],n=e.replace(/:[a-zA-Z0-9]+/g,(e=>{const n=e.slice(1);return t.push(n),"([^/]+)"})),s=[];e.replace(/\?[a-zA-Z0-9]+/g,(e=>{const t=e.slice(1);return s.push(t),"([^/]+)"}));return new RegExp(`^${n}(\\?(.*))?$`)}extractParams(e,t,n){const s=e.split("/"),o=t.split("/"),r={};for(let e=0;e<s.length;e++){const t=s[e],n=o[e];if(t.startsWith(":")){r[t.slice(1)]=n}}return r}buildPathWithQueryParams(e,t){const n=new URLSearchParams(t).toString();return n?`${e}?${n}`:e}}window.ReactRouter_v2=ReactRouter_v2,window.ReactRouter=ReactRouter;export const JsonWebToken={sign:(e,t,n="2h")=>{const s=new Date;s.setHours(s.getHours()+parseInt(n)),e.exp=s.getTime();const o=`${window.btoa(JSON.stringify(e))}.${window.btoa(t)}`;return localStorage.setItem("jwtToken",o),o},verify:(e,t)=>{const[n,s]=e.split("."),o=JSON.parse(window.atob(n));if(window.atob(s)===t)return o;throw new Error("Invalid token signature")},decode:e=>{const[t]=e.split(".");return JSON.parse(window.atob(t))},get:()=>localStorage.getItem("jwtToken"),remove:()=>{localStorage.removeItem("jwtToken")}};window.jsonwebtoken=JsonWebToken,window.router_path=null;export const bcrypt={hash:(e,t=10)=>new Promise(((n,s)=>{"string"!=typeof e&&s(new Error("Password must be a string")),"number"!=typeof t&&s(new Error("Salt rounds must be a number")),t<10&&s(new Error("Salt rounds must be >= 10"));const o=window.crypto.getRandomValues(new Uint8Array(16));window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then((e=>{n({hash:window.btoa(String.fromCharCode(...new Uint8Array(e))),salt:window.btoa(String.fromCharCode(...o))})}))})),compare:(e,t,n)=>new Promise(((s,o)=>{"string"!=typeof e&&o(new Error("Password must be a string")),"string"!=typeof t&&o(new Error("Hash must be a string")),"string"!=typeof n&&o(new Error("Salt must be a string")),window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then((e=>{const n=window.btoa(String.fromCharCode(...new Uint8Array(e)));s(n===t)}))}))};window.bcrypt=bcrypt;let m=null;window.React._render=e=>t=>{const n=document.getElementById(t);m||(m=ReactDOM.createRoot(n)),m.render(e)},window.visiVersion="1.9.1-canary",fetch("https://registry.npmjs.org/visi.js").then((e=>e.json())).then((e=>{e["dist-tags"].latest!==visiVersion&&console.warn(`You are using an outdated version of Visi.js. Please update to ${e["dist-tags"].latest} by running npx visiapp@latest create <your_app_name>`,{current:visiVersion,latest:e["dist-tags"].latest})})).catch((e=>{console.error("Failed to check for updates. Error: "+e)}));const p=document.getElementsByTagName("head")[0];if(!p.querySelector('link[rel="icon"]')){const e=document.createElement("link");e.rel="icon",e.href="https://github.com/Postr-Inc/visi.js/blob/main/assets/visilogo.png?raw=true",p.appendChild(e)}let w=document.querySelector("html").getAttribute("data-render");const g="dispose_cache";let f=parseInt(localStorage.getItem("dispose_cache_version"))||0;const y=async()=>{c.enabled&&console.log("Clearing cache...");const e=await caches.keys();for(const t of e)t===g&&(await caches.delete(t),c.enabled&&console.log("Cache cleared"))},b=e=>{e>f&&(y(),localStorage.setItem("dispose_cache_version",e.toString()),f=e)};window.updateCacheVersion=b;const S=new Worker(URL.createObjectURL(new Blob([`(${(()=>{onmessage=e=>{importScripts("https://unpkg.com/@babel/standalone/babel.min.js");const{code:t,filename:n}=e.data,s=Babel.transform(t,{presets:["react","typescript"],filename:n}).code;postMessage({type:"code",data:s,start:Date.now(),filename:n})}}).toString()})()`],{type:"application/javascript"}))),E=(e,t)=>{window.exports=JSON.parse(localStorage.getItem("exportsData"))||[],window.postMessage({type:"export",data:{filename:t,exports:e}},"*")},v=e=>{(e=>{new Promise(((t,n)=>{fetch(e).then((e=>e.text())).then((n=>{S.onmessage=e=>{const{type:n,data:s,filename:o,start:r}=e.data;if("code"===n){const e=document.createElement("script");e.innerHTML=s,e.type="module",document.head.appendChild(e),setTimeout((()=>t(o)),0),c.enabled&&console.log({filename:o,message:`Compiled in ${Date.now()-r}ms`})}},S.postMessage({code:n,filename:e})})).catch(n)}))})(e)},C=e=>{v(e);return new Promise(((e,t)=>{window.onmessage=t=>{if("export"===t.data.type){const{exports:n}=t.data.data;e(n)}}})).then((e=>e))};window.addEventListener("beforeunload",(()=>{window.onmessage=(e,t)=>{t===window.location.origin&&"dispose"===e.data.type&&y()}})),window._export=E,window.require=C;export{E as _export,C as require};const $=new Worker(URL.createObjectURL(new Blob([`(${(()=>{onmessage=e=>{importScripts("https://unpkg.com/@babel/standalone/babel.min.js");const{code:t}=e.data,n=Babel.transform(t,{presets:["react","typescript"]}).code;postMessage({type:"code",data:n})}}).toString()})()`],{type:"application/javascript"}))),I=async(e,t,n={})=>{const s=await caches.open(g),o=await s.match(e);if("cfr"===w&&o){const s=await o.blob(),r=await new Response(s).arrayBuffer(),a=pako.ungzip(new Uint8Array(r),{to:"string"}),{type:i,data:l,componentName:d,timestamp:h,version:u,start:m}=JSON.parse(a);if(Math.floor(Date.now()/1e3)-h<36e5&&u===f){if("tsx"===i||"jsx"===i){const s=new Function("props",`\n          return function() {\n            ${l}\n            return React.createElement(${d}, props)\n          }\n        `);c.enabled&&console.log("Component from "+e+" loaded from cache in "+(Date.now()-m)+"ms");const o=s(n);t(o)}return}}const r=e.split(".").pop(),a=["react"];fetch(e).then((e=>e.text())).then((o=>{const i=e.split("/").pop().split(".")[0];let l;if(l=Babel.transform(o,{presets:a}).code,"cfr"===w&&s){const t=Math.floor(Date.now()/1e3),n={type:r,data:l,componentName:i,timestamp:t,version:f,start:Date.now()},o=pako.gzip(JSON.stringify(n));s.put(e,new Response(o)),c.enabled&&console.log("Cache updated")}const d=new Function("props",`\n        return function() {\n          ${l}\n          return React.createElement(${i}, props)\n        }\n      `);c.enabled&&console.log(`Component from ${e} compiled in ${Date.now()-start}ms`);const h=d(n);t(h)})),$.onmessage=t=>{const{type:n,data:o}=t.data;"code"===n&&s.put(e,new Response(pako.gzip(o)))}};window.dispose=I;export{I as dispose,b as updateCacheVersion};